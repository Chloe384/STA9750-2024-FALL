<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>mp03 – STA 9750 2024 Submission Material</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>

<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="site_libs/datatables-binding-0.33/datatables.js"></script>

<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>



</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">STA 9750 2024 Submission Material</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="mini-project-03-do-proportional-electoral-college-allocations-yield-a-more-representative-presidency" class="level1">
<h1>Mini-Project #03: Do Proportional Electoral College Allocations Yield a More Representative Presidency?</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="election.png" class="img-fluid figure-img"></p>
<figcaption>US Election. Source: BBC News</figcaption>
</figure>
</div>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction:</h2>
<p>The U.S. Electoral College (EC) system plays a crucial role in presidential elections, often making the process more complicated than a straightforward nationwide popular vote. The system has been the subject of ongoing debate, particularly when election results do not align with the popular vote. This analysis aims to examine how the allocation methods used in the Electoral College influence election outcomes and whether they create any potential bias, particularly in favor of one political party.</p>
<p>In this analysis, we explore U.S. House election data from 1976 to 2022, sourced from the MIT Election Data and Science Lab(https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/IG0UN2), to better understand voting patterns, party dominance, and demographic shifts. By comparing this data with U.S. Presidential election results, we examine whether a proportional Electoral College system would lead to a presidency that more closely reflects the popular vote and voter sentiment, offering a more representative outcome in future elections.</p>
</section>
<section id="data-i-us-house-election-votes-from-1976-to-2022" class="level2">
<h2 class="anchored" data-anchor-id="data-i-us-house-election-votes-from-1976-to-2022">Data I: US House Election Votes from 1976 to 2022</h2>
<p>In this analysis, we will use data from the <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/IG0UN2">MIT Election Data Science Lab</a><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, which provides comprehensive details on U.S. House election outcomes from 1976 to 2022. Additionally, we will incorporate data on U.S. presidential elections<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> to explore trends across both national and congressional races from 1976 to 2020. This rich dataset allows us to investigate voting patterns, party shifts, and electoral dynamics over nearly half a century.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load all necessary functions required in this report ahead of time</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tigris)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tools)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(usmap)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(formattable)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-summary: "Show the code"</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the path to the CSV file</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>csv_file_path <span class="ot">&lt;-</span> <span class="st">"C:/Users/zhuol/OneDrive/Documents/STA9750-2024-FALL/congressional_shapefiles/1976-2022-house.csv"</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Check if the CSV file exists</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(csv_file_path)) {</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read the CSV file</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>  house_1976_2022 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(csv_file_path)}</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the path to the CSV file</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>csv_file_path_2 <span class="ot">&lt;-</span> <span class="st">"C:/Users/zhuol/OneDrive/Documents/STA9750-2024-FALL/president_data/1976-2020-president.csv"</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(csv_file_path_2)) {</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Read the CSV file</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  president_1976_2020 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(csv_file_path_2)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-1-download-congressional-shapefiles-1976-20123" class="level2">
<h2 class="anchored" data-anchor-id="task-1-download-congressional-shapefiles-1976-20123">Task 1: Download Congressional Shapefiles 1976-2012<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a></h2>
<p>Next, to visualize past election results on a U.S. map, we need to download the district shapefiles for the U.S. from 1976 to 2022. Specifically, we will obtain the district shapefiles from 1976 to 2012 from Lewis et al.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>, using the following code to automate the process.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary library</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(httr)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create directory for UCLA shapefiles</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>ucla_dir <span class="ot">&lt;-</span> <span class="st">"C:/Users/zhuol/OneDrive/Documents/STA9750-2024-FALL/data/UCLA_congress"</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(ucla_dir, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to download specific UCLA shapefiles</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>download_ucla_shapefiles <span class="ot">&lt;-</span> <span class="cf">function</span>(sessions, base_url) {</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (session <span class="cf">in</span> sessions) {</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    file_name <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"districts"</span>, <span class="fu">sprintf</span>(<span class="st">"%03d"</span>, session), <span class="st">".zip"</span>)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    url <span class="ot">&lt;-</span> <span class="fu">paste0</span>(base_url, file_name)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    destfile <span class="ot">&lt;-</span> <span class="fu">file.path</span>(ucla_dir, file_name)</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    response <span class="ot">&lt;-</span> <span class="fu">GET</span>(url, <span class="fu">write_disk</span>(destfile, <span class="at">overwrite =</span> <span class="cn">TRUE</span>))</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the base URL for UCLA shapefiles</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>ucla_base_url <span class="ot">&lt;-</span> <span class="st">"https://cdmaps.polisci.ucla.edu/shp/"</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a><span class="co"># download districts 093 to 112</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>sessions_to_download <span class="ot">&lt;-</span> <span class="dv">93</span><span class="sc">:</span><span class="dv">112</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Download the specified UCLA shapefiles</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a><span class="fu">download_ucla_shapefiles</span>(sessions_to_download, ucla_base_url)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-2-download-congressional-shapefiles-2014-20224" class="level2">
<h2 class="anchored" data-anchor-id="task-2-download-congressional-shapefiles-2014-20224">Task 2: Download Congressional Shapefiles 2014-2022<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></h2>
<p>For elections from 2014 to the present, we can use the following code to automatically download congressional district shapefiles for the US Census Bureau<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a>.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create directory for Census shapefiles</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>census_dir <span class="ot">&lt;-</span> <span class="st">"C:/Users/zhuol/OneDrive/Documents/STA9750-2024-FALL/data/census_congress"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(census_dir, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to download Census shapefiles systematically</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>download_census_shapefiles <span class="ot">&lt;-</span> <span class="cf">function</span>(urls) {</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (url <span class="cf">in</span> urls) {</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    file_name <span class="ot">&lt;-</span> <span class="fu">basename</span>(url)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    destfile <span class="ot">&lt;-</span> <span class="fu">file.path</span>(census_dir, file_name)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    response <span class="ot">&lt;-</span> <span class="fu">GET</span>(url, <span class="fu">write_disk</span>(destfile, <span class="at">overwrite =</span> <span class="cn">TRUE</span>))</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Define URLs for Census shapefiles</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>census_shapefile_urls <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2014/CD/tl_2014_us_cd114.zip"</span>,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2015/CD/tl_2015_us_cd114.zip"</span>,</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2016/CD/tl_2016_us_cd115.zip"</span>,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2017/CD/tl_2017_us_cd115.zip"</span>,</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2018/CD/tl_2018_us_cd116.zip"</span>,</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2019/CD/tl_2019_us_cd116.zip"</span>,</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2020/CD/tl_2020_us_cd116.zip"</span>,</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2021/CD/tl_2021_us_cd116.zip"</span>,</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www2.census.gov/geo/tiger/TIGER2022/CD/tl_2022_us_cd116.zip"</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Download Census shapefiles</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="fu">download_census_shapefiles</span>(census_shapefile_urls)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-3-exploration-of-vote-count-data" class="level2">
<h2 class="anchored" data-anchor-id="task-3-exploration-of-vote-count-data">Task 3: Exploration of Vote Count Data</h2>
<p><strong>Question 1: Which states have gained and lost the most seats in the US House of Representatives between 1976 and 2022?</strong></p>
<p>Using the code below, I create a bar chart to illustrate the number of seats in the US House of Representatives between 1976 and 2022 per state. Over time, certain states have gained and/or lost seats based on population changes.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the number of districts (seats) per state per year</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>seats_by_state <span class="ot">&lt;-</span> house_1976_2022 <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state_po, year) <span class="sc">%&gt;%</span>  <span class="co"># Use state_po for state abbreviations</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">seats =</span> <span class="fu">n_distinct</span>(district), <span class="at">.groups =</span> <span class="st">"drop"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter for the years 1976 and 2022</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>seats_1976_2022 <span class="ot">&lt;-</span> seats_by_state <span class="sc">%&gt;%</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1976</span>, <span class="dv">2022</span>))</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a bar plot </span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(seats_1976_2022, <span class="fu">aes</span>(<span class="at">x =</span> state_po, <span class="at">y =</span> seats, <span class="at">fill =</span> <span class="fu">factor</span>(year))) <span class="sc">+</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span>  </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Number of Seats in the U.S. House of Representatives (1976 vs 2022)"</span>,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"State Abbreviation"</span>,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Number of Seats"</span>,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Year"</span>) <span class="sc">+</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>, <span class="at">hjust =</span> <span class="dv">1</span>),  </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"1976"</span> <span class="ot">=</span> <span class="st">"skyblue"</span>, <span class="st">"2022"</span> <span class="ot">=</span> <span class="st">"darkorange"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>In the code below, I calculated the change in the number of seats in the U.S. House of Representatives from 1976 to 2022, highlighting how shifts in population have affected state representation. Texas saw the largest gain, with an increase of 14 seats, while New York had the largest loss, dropping 13 seats. In total, 15 states gained seats, while 19 states lost seats. These changes result from population fluctuations recorded in the decennial U.S. Census, which determines how the 435 House seats are distributed among states based on their relative populations. Such shifts in representation reflect broader trends in demographics, migration, and population growth or decline over time.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Count the number of seats per state for each year</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>gains_losses <span class="ot">&lt;-</span> house_1976_2022 <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state, year) <span class="sc">|&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">num_districts =</span> <span class="fu">n_distinct</span>(district)) <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(state, year) <span class="sc">|&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">|&gt;</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">first_year_seats =</span> <span class="fu">first</span>(num_districts),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">last_year_seats =</span> <span class="fu">last</span>(num_districts),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">seat_change =</span> last_year_seats <span class="sc">-</span> first_year_seats) <span class="sc">|&gt;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(seat_change <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(seat_change))   <span class="co"># Calculate seat changes for each state</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the plot</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(gains_losses, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(state, seat_change), <span class="at">y =</span> seat_change, <span class="at">fill =</span> seat_change <span class="sc">&gt;</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"lightpink"</span>, <span class="st">"skyblue"</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Loss"</span>, <span class="st">"Gain"</span>)) <span class="sc">+</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Gains and Losses of House Seats (1976 to 2022)"</span>,</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"State"</span>,</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Change in Seats"</span>,</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"Change"</span></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Question 2: New York State has a unique “fusion” voting system where one candidate can appear on multiple “lines” on the ballot and their vote counts are totaled. For instance, in 2022, Jerrold Nadler appeared on both the Democrat and Working Families party lines for NYS’ 12th Congressional District. He received 200,890 votes total (184,872 as a Democrat and 16,018 as WFP), easily defeating Michael Zumbluskas, who received 44,173 votes across three party lines (Republican, Conservative, and Parent).</strong></p>
<p>Are there any elections in our data where the election would have had a different outcome if the “fusion” system was not used and candidates only received the votes their received from their “major party line” (Democrat or Republican) and not their total number of votes across all lines?</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find winner without fusion system</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>winner_no_fusion_votes <span class="ot">&lt;-</span> house_1976_2022 <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district, candidate, party) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">party_votes =</span> <span class="fu">sum</span>(candidatevotes)) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party_votes <span class="sc">==</span> <span class="fu">max</span>(party_votes)) <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(year, state, district, candidate))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Find winner with fusion system</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>winner_fusion_votes <span class="ot">&lt;-</span> house_1976_2022 <span class="sc">%&gt;%</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district, candidate) <span class="sc">%&gt;%</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">candidate_total =</span> <span class="fu">sum</span>(candidatevotes)) <span class="sc">%&gt;%</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district) <span class="sc">%&gt;%</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(candidate_total <span class="sc">==</span> <span class="fu">max</span>(candidate_total)) <span class="sc">%&gt;%</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(year, state, district, candidate))</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine to compare difference</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>comparison_winner <span class="ot">&lt;-</span> <span class="fu">left_join</span>(winner_fusion_votes, winner_no_fusion_votes, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"state"</span>, <span class="st">"district"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">winner_fusion =</span> candidate.x,</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">winner_no_fusion =</span> candidate.y) <span class="sc">%&gt;%</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">same_winner =</span> (winner_fusion <span class="sc">==</span> winner_no_fusion)) <span class="sc">%&gt;%</span></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(same_winner <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare the data frame for kable</span></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>comparison_winner_df <span class="ot">&lt;-</span> comparison_winner <span class="sc">%&gt;%</span></span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">'year'</span>, <span class="st">'state'</span>, <span class="st">'district'</span>, <span class="st">'winner_fusion'</span>, <span class="st">'winner_no_fusion'</span>))</span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a kable table for the results</span></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(comparison_winner_df, </span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Table 1: Differences in House Seat Winners with Fusion and Without Fusion"</span>, </span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"State"</span>, <span class="st">"District"</span>, <span class="st">"Fusion Winner"</span>, <span class="st">"No Fusion Winner"</span>),</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>      <span class="at">format =</span> <span class="st">"html"</span>, </span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="st">"c"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>), <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>Table 1: Differences in House Seat Winners with Fusion and Without Fusion</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Year</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">State</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">District</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Fusion Winner</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">No Fusion Winner</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1976</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">29</td>
<td style="text-align: center;">EDWARD W PATTISON</td>
<td style="text-align: center;">JOSEPH A MARTINO</td>
</tr>
<tr class="even">
<td style="text-align: center;">1980</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">GREGORY W CARMAN</td>
<td style="text-align: center;">JEROME A AMBRO JR</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1980</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">JOHN LEBOUTILLIER</td>
<td style="text-align: center;">LESTER L WOLFF</td>
</tr>
<tr class="even">
<td style="text-align: center;">1984</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">20</td>
<td style="text-align: center;">JOSEPH J DIOGUARDI</td>
<td style="text-align: center;">OREN J TEICHER</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1986</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">27</td>
<td style="text-align: center;">GEORGE C WORTLEY</td>
<td style="text-align: center;">ROSEMARY S POOLER</td>
</tr>
<tr class="even">
<td style="text-align: center;">1992</td>
<td style="text-align: center;">CONNECTICUT</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">SAM GEJDENSON</td>
<td style="text-align: center;">EDWARD W MUNSTER</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1992</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">3</td>
<td style="text-align: center;">PETER T KING</td>
<td style="text-align: center;">STEVE A ORLINS</td>
</tr>
<tr class="even">
<td style="text-align: center;">1994</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">MICHAEL P FORBES</td>
<td style="text-align: center;">GEORGE J HOCHBRUECKNER</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1996</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">MICHAEL P FORBES</td>
<td style="text-align: center;">NORA L BREDES</td>
</tr>
<tr class="even">
<td style="text-align: center;">1996</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">30</td>
<td style="text-align: center;">JACK QUINN</td>
<td style="text-align: center;">FRANCIS J PORDUM</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2000</td>
<td style="text-align: center;">CONNECTICUT</td>
<td style="text-align: center;">2</td>
<td style="text-align: center;">ROB SIMMONS</td>
<td style="text-align: center;">SAM GEJDENSON</td>
</tr>
<tr class="even">
<td style="text-align: center;">2006</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">25</td>
<td style="text-align: center;">JAMES T WALSH</td>
<td style="text-align: center;">DAN MAFFEI</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2006</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">29</td>
<td style="text-align: center;">JOHN R "RANDY" KUHL JR</td>
<td style="text-align: center;">ERIC J MASSA</td>
</tr>
<tr class="even">
<td style="text-align: center;">2010</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">13</td>
<td style="text-align: center;">MICHAEL G GRIMM</td>
<td style="text-align: center;">MICHAEL E MCMAHON</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2010</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">19</td>
<td style="text-align: center;">NAN HAYMORTH</td>
<td style="text-align: center;">JOHN J HALL</td>
</tr>
<tr class="even">
<td style="text-align: center;">2010</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">24</td>
<td style="text-align: center;">RICHARD L HANNA</td>
<td style="text-align: center;">MICHAEL A ARCURI</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2010</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">25</td>
<td style="text-align: center;">ANN MARIE BUERKLE</td>
<td style="text-align: center;">DANIEL B MAFFEI</td>
</tr>
<tr class="even">
<td style="text-align: center;">2012</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">27</td>
<td style="text-align: center;">CHRIS COLLINS</td>
<td style="text-align: center;">KATHLEEN C HOCHUL</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2018</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">LEE M ZELDIN</td>
<td style="text-align: center;">PERRY GERSHON</td>
</tr>
<tr class="even">
<td style="text-align: center;">2018</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">24</td>
<td style="text-align: center;">JOHN M KATKO</td>
<td style="text-align: center;">DANA BALTER</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2018</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">27</td>
<td style="text-align: center;">CHRIS COLLINS</td>
<td style="text-align: center;">NATHAN D MCMURRAY</td>
</tr>
<tr class="even">
<td style="text-align: center;">2022</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">ANTHONY P D’ESPOSITO</td>
<td style="text-align: center;">LAURA A GILLEN</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2022</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">17</td>
<td style="text-align: center;">MICHAEL V LAWLER</td>
<td style="text-align: center;">SEAN PATRICK MALONEY</td>
</tr>
<tr class="even">
<td style="text-align: center;">2022</td>
<td style="text-align: center;">NEW YORK</td>
<td style="text-align: center;">22</td>
<td style="text-align: center;">BRANDON M WILLIAMS</td>
<td style="text-align: center;">FRANCIS CONOLE</td>
</tr>
</tbody>
</table>


</div>
</div>
<p><strong>Question 3: Do presidential candidates tend to run ahead of or run behind congressional candidates in the same state? That is, does a Democratic candidate for president tend to get more votes in a given state than all Democratic congressional candidates in the same state?</strong></p>
<p>Does this trend differ over time? Does it differ across states or across parties? Are any presidents particularly more or less popular than their co-partisans?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Find winner without fusion system</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>winner_no_fusion_votes <span class="ot">&lt;-</span> house_1976_2022 <span class="sc">%&gt;%</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district, candidate, party) <span class="sc">%&gt;%</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">party_votes =</span> <span class="fu">sum</span>(candidatevotes)) <span class="sc">%&gt;%</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district) <span class="sc">%&gt;%</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party_votes <span class="sc">==</span> <span class="fu">max</span>(party_votes)) <span class="sc">%&gt;%</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(year, state, district, candidate))</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Find winner with fusion system</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>winner_fusion_votes <span class="ot">&lt;-</span> house_1976_2022 <span class="sc">%&gt;%</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district, candidate) <span class="sc">%&gt;%</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">candidate_total =</span> <span class="fu">sum</span>(candidatevotes)) <span class="sc">%&gt;%</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district) <span class="sc">%&gt;%</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(candidate_total <span class="sc">==</span> <span class="fu">max</span>(candidate_total)) <span class="sc">%&gt;%</span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(year, state, district, candidate))</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Combine to compare difference</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>comparison_winner <span class="ot">&lt;-</span> <span class="fu">left_join</span>(winner_fusion_votes, winner_no_fusion_votes, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"state"</span>, <span class="st">"district"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">winner_fusion =</span> candidate.x,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">winner_no_fusion =</span> candidate.y) <span class="sc">%&gt;%</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">same_winner =</span> (winner_fusion <span class="sc">==</span> winner_no_fusion)) <span class="sc">%&gt;%</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(same_winner <span class="sc">==</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare the data frame for DT</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>comparison_winner_df <span class="ot">&lt;-</span> comparison_winner <span class="sc">%&gt;%</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(<span class="st">'year'</span>, <span class="st">'state'</span>, <span class="st">'district'</span>, <span class="st">'winner_fusion'</span>, <span class="st">'winner_no_fusion'</span>))</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a DT table for the results</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(comparison_winner_df, </span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>          <span class="at">caption =</span> <span class="st">"Table 1: Differences in House Seat Winners with Fusion and Without Fusion"</span>, </span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>          <span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"State"</span>, <span class="st">"District"</span>, <span class="st">"Fusion Winner"</span>, <span class="st">"No Fusion Winner"</span>),</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>, <span class="at">autoWidth =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"state"</span>, <span class="st">"district"</span>, <span class="st">"winner_fusion"</span>, <span class="st">"winner_no_fusion"</span>), </span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>              <span class="at">backgroundColor =</span> <span class="fu">styleEqual</span>(<span class="fu">c</span>(<span class="st">"Fusion Winner"</span>, <span class="st">"No Fusion Winner"</span>), <span class="fu">c</span>(<span class="st">"lightblue"</span>, <span class="st">"lightgray"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-d1216820e89054dbd3e6" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-d1216820e89054dbd3e6">{"x":{"filter":"none","vertical":false,"caption":"<caption>Table 1: Differences in House Seat Winners with Fusion and Without Fusion<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24"],[1976,1980,1980,1984,1986,1992,1992,1994,1996,1996,2000,2006,2006,2010,2010,2010,2010,2012,2018,2018,2018,2022,2022,2022],["NEW YORK","NEW YORK","NEW YORK","NEW YORK","NEW YORK","CONNECTICUT","NEW YORK","NEW YORK","NEW YORK","NEW YORK","CONNECTICUT","NEW YORK","NEW YORK","NEW YORK","NEW YORK","NEW YORK","NEW YORK","NEW YORK","NEW YORK","NEW YORK","NEW YORK","NEW YORK","NEW YORK","NEW YORK"],[29,3,6,20,27,2,3,1,1,30,2,25,29,13,19,24,25,27,1,24,27,4,17,22],["EDWARD W PATTISON","GREGORY W CARMAN","JOHN LEBOUTILLIER","JOSEPH J DIOGUARDI","GEORGE C WORTLEY","SAM GEJDENSON","PETER T KING","MICHAEL P FORBES","MICHAEL P FORBES","JACK QUINN","ROB SIMMONS","JAMES T WALSH","JOHN R \"RANDY\" KUHL JR","MICHAEL G GRIMM","NAN HAYMORTH","RICHARD L HANNA","ANN MARIE BUERKLE","CHRIS COLLINS","LEE M ZELDIN","JOHN M KATKO","CHRIS COLLINS","ANTHONY P D’ESPOSITO","MICHAEL V LAWLER","BRANDON M WILLIAMS"],["JOSEPH A MARTINO","JEROME A AMBRO JR","LESTER L WOLFF","OREN J TEICHER","ROSEMARY S POOLER","EDWARD W MUNSTER","STEVE A ORLINS","GEORGE J HOCHBRUECKNER","NORA L BREDES","FRANCIS J PORDUM","SAM GEJDENSON","DAN MAFFEI","ERIC J MASSA","MICHAEL E MCMAHON","JOHN J HALL","MICHAEL A ARCURI","DANIEL B MAFFEI","KATHLEEN C HOCHUL","PERRY GERSHON","DANA BALTER","NATHAN D MCMURRAY","LAURA A GILLEN","SEAN PATRICK MALONEY","FRANCIS CONOLE"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Year<\/th>\n      <th>State<\/th>\n      <th>District<\/th>\n      <th>Fusion Winner<\/th>\n      <th>No Fusion Winner<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[1,3]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"year","targets":1},{"name":"state","targets":2},{"name":"district","targets":3},{"name":"winner_fusion","targets":4},{"name":"winner_no_fusion","targets":5}],"order":[],"orderClasses":false,"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[1]; $(this.api().cell(row, 1).node()).css({'background-color':value == \"Fusion Winner\" ? \"lightblue\" : value == \"No Fusion Winner\" ? \"lightgray\" : null});\nvar value=data[2]; $(this.api().cell(row, 2).node()).css({'background-color':value == \"Fusion Winner\" ? \"lightblue\" : value == \"No Fusion Winner\" ? \"lightgray\" : null});\nvar value=data[3]; $(this.api().cell(row, 3).node()).css({'background-color':value == \"Fusion Winner\" ? \"lightblue\" : value == \"No Fusion Winner\" ? \"lightgray\" : null});\nvar value=data[4]; $(this.api().cell(row, 4).node()).css({'background-color':value == \"Fusion Winner\" ? \"lightblue\" : value == \"No Fusion Winner\" ? \"lightgray\" : null});\nvar value=data[5]; $(this.api().cell(row, 5).node()).css({'background-color':value == \"Fusion Winner\" ? \"lightblue\" : value == \"No Fusion Winner\" ? \"lightgray\" : null});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
<p><strong>Question 3: Do presidential candidates tend to run ahead of or run behind congressional candidates in the same state? That is, does a Democratic candidate for president tend to get more votes in a given state than all Democratic congressional candidates in the same state?</strong></p>
<p>Does this trend differ over time? Does it differ across states or across parties? Are any presidents particularly more or less popular than their co-partisans?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize presidential votes for candidates</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>presidential_votes <span class="ot">&lt;-</span> president_1976_2020 <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party_simplified <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span>, <span class="st">"REPUBLICAN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">presidential_total_votes =</span> <span class="fu">sum</span>(candidatevotes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize congressional votes for candidates</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>congressional_votes <span class="ot">&lt;-</span> house_1976_2022 <span class="sc">%&gt;%</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span>, <span class="st">"REPUBLICAN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, party) <span class="sc">%&gt;%</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">congressional_total_votes =</span> <span class="fu">sum</span>(candidatevotes, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Join to compare</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>vote_comparison <span class="ot">&lt;-</span> <span class="fu">left_join</span>(presidential_votes, congressional_votes, </span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>                             <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"state"</span>, <span class="st">"party_simplified"</span> <span class="ot">=</span> <span class="st">"party"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">vote_difference =</span> presidential_total_votes <span class="sc">-</span> congressional_total_votes,</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">run_ahead =</span> <span class="fu">if_else</span>(vote_difference <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">"Presidential Ahead"</span>, <span class="st">"Presidential Behind"</span>)</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(run_ahead, vote_difference)</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows with NA or 0</span></span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a>vote_comparison_cleaned <span class="ot">&lt;-</span> vote_comparison <span class="sc">%&gt;%</span></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(vote_difference) <span class="sc">&amp;</span> vote_difference <span class="sc">!=</span> <span class="dv">0</span>)</span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Create an  DT table</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(vote_comparison_cleaned, </span>
<span id="cb8-37"><a href="#cb8-37" aria-hidden="true" tabindex="-1"></a>          <span class="at">caption =</span> <span class="st">"Comparison of Presidential vs Congressional Votes by State and Year"</span>, </span>
<span id="cb8-38"><a href="#cb8-38" aria-hidden="true" tabindex="-1"></a>          <span class="at">colnames =</span> <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"State"</span>, <span class="st">"Party"</span>, <span class="st">"Presidential Votes"</span>, <span class="st">"Congressional Votes"</span>, <span class="st">"Vote Difference"</span>, <span class="st">"Result"</span>),</span>
<span id="cb8-39"><a href="#cb8-39" aria-hidden="true" tabindex="-1"></a>          <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">10</span>, <span class="at">autoWidth =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb8-40"><a href="#cb8-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formatStyle</span>(<span class="at">columns =</span> <span class="fu">c</span>(<span class="st">"run_ahead"</span>), </span>
<span id="cb8-41"><a href="#cb8-41" aria-hidden="true" tabindex="-1"></a>              <span class="at">backgroundColor =</span> <span class="fu">styleEqual</span>(<span class="fu">c</span>(<span class="st">"Presidential Ahead"</span>, <span class="st">"Presidential Behind"</span>), </span>
<span id="cb8-42"><a href="#cb8-42" aria-hidden="true" tabindex="-1"></a>                                           <span class="fu">c</span>(<span class="st">"lightgreen"</span>, <span class="st">"lightcoral"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-7bd8693bfdac238f1305" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7bd8693bfdac238f1305">{"x":{"filter":"none","vertical":false,"caption":"<caption>Comparison of Presidential vs Congressional Votes by State and Year<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783","784","785","786","787","788","789","790","791","792","793","794","795","796","797","798","799","800","801","802","803","804","805","806","807","808","809","810","811","812","813","814","815","816","817","818","819","820","821","822","823","824","825","826","827","828","829","830","831","832","833","834","835","836","837","838","839","840","841","842","843","844","845","846","847","848","849","850","851","852","853","854","855","856","857","858","859","860","861","862","863","864","865","866","867","868","869","870","871","872","873","874","875","876","877","878","879","880","881","882","883","884","885","886","887","888","889","890","891","892","893","894","895","896","897","898","899","900","901","902","903","904","905","906","907","908","909","910","911","912","913","914","915","916","917","918","919","920","921","922","923","924","925","926","927","928","929","930","931","932","933","934","935","936","937","938","939","940","941","942","943","944","945","946","947","948","949","950","951","952","953","954","955","956","957","958","959","960","961","962","963","964","965","966","967","968","969","970","971","972","973","974","975","976","977","978","979","980","981","982","983","984","985","986","987","988","989","990","991","992","993","994","995","996","997","998","999","1000","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","1016","1017","1018","1019","1020","1021","1022","1023","1024","1025","1026","1027","1028","1029","1030","1031","1032","1033","1034","1035","1036","1037","1038","1039","1040","1041","1042","1043","1044","1045","1046","1047","1048","1049","1050","1051","1052","1053","1054","1055","1056","1057","1058","1059","1060","1061","1062","1063","1064","1065","1066","1067","1068","1069","1070","1071","1072","1073","1074","1075","1076","1077","1078","1079","1080","1081","1082","1083","1084","1085","1086","1087","1088","1089","1090","1091","1092","1093","1094","1095","1096","1097","1098","1099","1100","1101","1102","1103","1104","1105","1106","1107","1108","1109","1110","1111","1112","1113","1114","1115","1116","1117","1118","1119","1120","1121","1122","1123","1124","1125","1126","1127","1128","1129","1130","1131","1132","1133","1134","1135","1136","1137","1138","1139","1140","1141","1142","1143","1144","1145","1146","1147","1148","1149","1150","1151","1152","1153","1154","1155","1156","1157","1158","1159","1160","1161","1162","1163","1164","1165","1166","1167","1168","1169","1170","1171","1172","1173","1174","1175","1176","1177","1178","1179","1180","1181","1182","1183","1184","1185","1186","1187","1188","1189"],[1984,1988,2016,2008,1992,1984,1984,1980,2000,1980,2016,1984,2000,1996,2016,2012,2020,2012,2020,1976,2000,2020,2012,2012,2004,2016,2020,2008,1976,1976,2000,1996,2012,2004,2016,2008,2020,1980,2012,1984,2020,1992,2004,2016,1980,1992,2012,1996,2012,2020,2008,1976,1976,2004,2012,2012,1984,1988,2020,1996,2020,2020,2012,2016,2000,2012,2004,2016,1984,2020,2016,2016,2004,2012,1984,2012,2020,2020,2008,1976,1988,1984,2020,2008,1976,1984,2020,2016,2012,1988,1992,2012,1984,2004,1992,1996,2016,1980,1976,2008,1984,2020,2012,1992,2012,1996,2012,2008,1976,2012,2000,2020,2004,2004,2020,1976,1980,1976,1984,2004,1996,2004,2012,2020,1988,2008,2008,2008,2012,2004,2020,2012,1976,2000,2000,2004,2020,2012,2012,2000,1988,2008,2008,2016,2020,2008,1988,1984,2016,2016,2020,1988,1976,2020,2016,1996,2020,1976,2020,1996,1992,1980,2012,1976,1980,2012,1984,2000,2008,1988,2012,1980,2008,2016,1984,1988,2004,2012,2020,2012,2016,1976,1980,2020,1976,2020,2008,2020,2020,2020,2020,2016,1980,2012,2008,2020,1980,2000,2000,2012,2012,2020,2016,1984,2000,1996,2020,2000,2016,2004,2004,2016,1980,1996,2008,2012,2004,1988,1988,2008,2016,2004,1980,2004,2012,1992,1976,2020,2000,2000,2012,2004,1996,1980,2020,2008,1976,2012,1988,1988,1992,1976,2016,1984,2004,2000,1984,1980,2000,1984,2004,2000,2020,2020,2000,2000,1992,1988,2004,2016,1996,2000,1984,1996,1980,1988,2020,2012,1996,2016,1988,2000,1996,1996,1988,1976,2004,1980,2016,1988,2004,1996,2000,2020,1984,2012,2004,1980,1976,1996,2008,2000,1976,2000,1976,2008,2012,1980,2020,2008,2000,2008,1988,1980,2004,2000,2004,2020,1980,1988,2004,1996,1976,1996,2016,2016,2008,2008,1976,2000,1988,1988,1988,2012,1976,2012,1984,1996,2008,2020,2020,1976,1992,1984,1976,1988,2008,2000,1980,2000,1976,2000,2004,2000,1992,1988,1976,1988,1996,1980,2016,2000,1992,2008,1996,2012,1976,2020,1988,1988,1980,2000,2008,2012,2012,2008,2020,1992,2004,2004,2008,2008,1980,2016,2004,2004,2004,2004,1980,2012,2012,1992,2012,2000,2008,2000,2004,1976,2000,2008,2000,2016,2008,2016,2004,2012,1976,1980,2004,2004,2000,1992,2020,2016,2000,2012,1996,2016,2000,2004,2016,2016,1996,1976,2020,2000,2000,2020,2000,2004,2020,2012,2004,1992,1980,2004,2004,2000,2016,2004,2008,2020,2016,2020,2000,2004,2020,1996,1984,2016,1984,1984,1996,1988,1980,1980,2008,2012,1980,2000,2008,1984,2016,2008,1984,2000,1980,2000,1984,2012,2004,1980,2012,1984,2008,1980,1976,2008,2012,2012,1988,1980,2004,1976,2000,2008,1976,2020,1988,1992,1996,1976,2004,2000,2012,1984,2012,1976,2000,1988,2020,2016,1980,1988,1996,1976,1984,2004,1988,2012,1980,2016,1988,1980,1992,2000,1976,2008,2008,2008,1976,2004,1976,1976,1976,1976,1980,2000,2012,2008,2008,2000,1976,1976,2020,1980,1988,1984,2008,2000,2000,2008,2004,2004,1988,1992,2004,2004,2004,1976,2004,2004,1988,2004,2008,2020,2000,2004,1976,1988,1984,1988,2012,2004,1976,2016,2020,2000,2012,2008,1980,1976,2012,2016,1988,1976,1976,1984,1988,2008,2008,1984,1980,2000,1980,2016,1980,1988,2008,2012,2012,2016,1988,1976,1984,1988,2008,2004,1980,1980,1996,2016,2008,2008,1980,2000,1976,2012,1988,1984,2004,2012,2016,2012,1988,1984,1992,2012,2004,1984,1980,2020,1980,2008,2012,1988,1988,2020,2020,1984,2016,1988,2008,1988,2016,1976,2016,1992,1984,1984,1988,1996,2012,2008,2012,2004,2000,1984,2012,2000,2004,2012,1984,2020,1984,2004,2012,2008,2008,2020,1984,2004,1976,1996,1984,2016,2004,1988,1992,1976,1980,1976,2000,2020,2008,2008,1984,1996,1996,1988,2004,1984,2008,2020,1988,2004,1984,2008,2016,2004,1984,1984,1976,1976,2012,1984,1988,2016,2004,1996,1988,1980,2008,2012,2008,2000,1988,2000,2008,1980,2000,1988,1984,1984,1988,2004,1984,1984,1984,1992,1980,1992,1992,1980,1996,1980,1984,1976,1988,1996,1980,1988,1984,1988,1984,2000,1992,1992,2000,2016,2008,1992,1996,1984,1992,1992,1984,1984,1984,1992,1996,1996,1992,1976,1984,1984,1992,1996,1984,1992,1984,1992,2004,2016,1984,1992,1980,1988,1988,1996,1988,1996,1992,1992,1992,1988,1980,1992,1992,1992,1992,1992,1976,1980,1992,1984,2016,1996,2016,1992,2016,1992,1992,2016,2016,1984,1992,1996,1988,1980,1996,2008,1996,1988,1984,1980,1992,1992,1984,1980,1988,2012,1988,1996,2016,1980,1976,2008,1976,1976,1988,1992,1980,1988,1992,2004,1992,1992,1996,1996,1980,1984,1980,1980,1980,1996,1996,1996,2008,1984,2016,2000,1992,2004,1984,1980,1984,2016,2020,1980,1996,1992,1988,1992,1996,1976,1992,1980,2008,1996,1992,1980,2000,1996,1984,2000,1988,1984,1976,2004,2020,1992,2000,2004,1980,1984,2020,1992,1988,1976,2000,1980,1996,1976,1980,2004,1980,1996,1996,2016,2016,1992,2020,2008,2000,1988,2016,1976,1992,1976,2008,2000,1980,1976,1976,1992,1996,1984,1976,2012,2000,1976,1980,1988,1992,2016,1996,2000,2004,2000,2004,2016,2000,1988,2012,2012,1980,1992,1984,1996,2004,1992,2000,1976,1980,1992,1980,2020,1980,1992,1996,2008,2008,2008,1984,1992,2004,1996,1988,1996,1992,2016,1976,1988,2020,1976,1980,1980,1996,2004,1980,2008,2008,1992,1992,1984,1992,2000,2020,1988,1992,2012,2008,1984,2000,1988,2000,2020,2016,1992,2020,2000,1976,1988,1992,1996,2020,1988,1996,2016,1992,1988,2012,1996,2008,2016,1992,2016,1988,1996,1976,1996,1976,2000,1992,1984,1984,2000,2012,1992,1992,2016,1984,1992,1996,1980,1996,2020,1984,1976,2020,1980,1996,2016,1976,1992,2020,1976,2000,1996,1988,1996,1980,1976,2004,2004,2012,2000,2000,1976,2000,2004,2008,2016,1988,2020,2020,1996,2016,1992,1996,1980,1996,1988,2020,1976,2012,1976,1976,2012,2000,1996,2016,1992,1984,1988,1996,1992,1976,1984,1988,2020,2008,1980,1976,2000,2016,2008,2004,2016,1980,2004,1984,2016,2016,1996,2004,2012,1992,2012,2008,2016,2004,2016,1992,2004,2016,1992,1996,1976,2016,2016,2008,2012,2016,1980,1984,2020,2016,2012,1996,1996,2000,1988,2008,1980,1980,2016,1996,2008,1984,2004,2008,2004,2020,2000,1996,1988,2008,2016,2016,1976,1984,2016,1988,1988,2016,1992,2020,1996,2008,1992,2020,2016,2012,1992,2020,2008,1992,2012,2004,2020,2020,1980,1996,1976,1996,1996,2012,2012,2020,2000,2008,1996,2012,1996,1996,2016,2020,2016,2020,1980,2012,2020,2020,1984,1996,2012,2020,1992,1988,1980,2000,1992,1996,1976,2020,2012,1996,1984,1996,2004,2020,2004,1988,2008,1980,1976,2000],["NEW MEXICO","ALASKA","LOUISIANA","OREGON","VERMONT","NEW HAMPSHIRE","VIRGINIA","MISSISSIPPI","WASHINGTON","ALASKA","DELAWARE","RHODE ISLAND","RHODE ISLAND","NEW MEXICO","WISCONSIN","SOUTH DAKOTA","VERMONT","IOWA","DELAWARE","NEW YORK","IDAHO","MONTANA","IDAHO","WYOMING","TENNESSEE","ALASKA","NEW MEXICO","HAWAII","MISSISSIPPI","COLORADO","WYOMING","ALABAMA","NEVADA","COLORADO","WASHINGTON","ARKANSAS","WYOMING","KENTUCKY","MISSISSIPPI","WYOMING","WYOMING","VIRGINIA","IDAHO","ALASKA","ALABAMA","DELAWARE","WISCONSIN","HAWAII","LOUISIANA","MINNESOTA","KANSAS","ALASKA","KENTUCKY","IDAHO","ARKANSAS","INDIANA","IOWA","WYOMING","NEW HAMPSHIRE","NORTH DAKOTA","HAWAII","NEW HAMPSHIRE","WYOMING","NEW HAMPSHIRE","NEW MEXICO","MONTANA","KANSAS","DELAWARE","NEW MEXICO","KANSAS","NORTH DAKOTA","NEVADA","MISSISSIPPI","IDAHO","ARIZONA","NORTH DAKOTA","SOUTH CAROLINA","DELAWARE","NEW MEXICO","NEW MEXICO","CONNECTICUT","NEW HAMPSHIRE","VERMONT","MAINE","VERMONT","RHODE ISLAND","DISTRICT OF COLUMBIA","WYOMING","NEW HAMPSHIRE","MONTANA","NORTH DAKOTA","MISSOURI","COLORADO","NEW MEXICO","SOUTH CAROLINA","SOUTH DAKOTA","MISSISSIPPI","SOUTH CAROLINA","DELAWARE","NEW HAMPSHIRE","NEBRASKA","MAINE","CONNECTICUT","RHODE ISLAND","OREGON","VIRGINIA","HAWAII","NEW HAMPSHIRE","NEBRASKA","ALABAMA","NEW YORK","ARIZONA","MARYLAND","NEBRASKA","NORTH CAROLINA","IDAHO","DELAWARE","ILLINOIS","ALASKA","SOUTH CAROLINA","NEW HAMPSHIRE","MICHIGAN","VERMONT","ALABAMA","VERMONT","WASHINGTON","IDAHO","NEW MEXICO","NEBRASKA","MISSOURI","CALIFORNIA","MAINE","WYOMING","HAWAII","NEW HAMPSHIRE","MONTANA","OKLAHOMA","MICHIGAN","NEW HAMPSHIRE","MONTANA","MAINE","COLORADO","MISSOURI","TENNESSEE","WASHINGTON","NEVADA","NEBRASKA","IOWA","MISSOURI","NEW HAMPSHIRE","ILLINOIS","NEW HAMPSHIRE","MINNESOTA","WEST VIRGINIA","NEVADA","NEVADA","IDAHO","NORTH DAKOTA","MICHIGAN","NEBRASKA","MARYLAND","COLORADO","OKLAHOMA","MONTANA","WISCONSIN","WEST VIRGINIA","NEVADA","ALASKA","WYOMING","NEW MEXICO","OKLAHOMA","NEW HAMPSHIRE","ALASKA","MISSISSIPPI","VERMONT","NEW MEXICO","WYOMING","DELAWARE","NEVADA","MARYLAND","MICHIGAN","NEW HAMPSHIRE","CONNECTICUT","KENTUCKY","LOUISIANA","NEVADA","HAWAII","CONNECTICUT","TENNESSEE","IOWA","WASHINGTON","RHODE ISLAND","WEST VIRGINIA","ALASKA","WASHINGTON","NEW JERSEY","SOUTH CAROLINA","SOUTH DAKOTA","RHODE ISLAND","OHIO","COLORADO","HAWAII","MARYLAND","COLORADO","OKLAHOMA","GEORGIA","ARIZONA","SOUTH CAROLINA","HAWAII","ARKANSAS","ALASKA","WEST VIRGINIA","MONTANA","MICHIGAN","KANSAS","SOUTH CAROLINA","HAWAII","KENTUCKY","NEVADA","RHODE ISLAND","NORTH CAROLINA","VERMONT","KANSAS","MAINE","RHODE ISLAND","SOUTH DAKOTA","COLORADO","INDIANA","NORTH DAKOTA","KENTUCKY","NEW JERSEY","KANSAS","TEXAS","MINNESOTA","NEBRASKA","NORTH DAKOTA","GEORGIA","IOWA","WISCONSIN","IDAHO","TENNESSEE","TENNESSEE","OREGON","DELAWARE","KENTUCKY","PENNSYLVANIA","MAINE","SOUTH DAKOTA","NEBRASKA","MONTANA","SOUTH DAKOTA","MISSOURI","UTAH","OREGON","WISCONSIN","NEVADA","HAWAII","KANSAS","RHODE ISLAND","TENNESSEE","MISSOURI","SOUTH CAROLINA","IDAHO","OKLAHOMA","IDAHO","VIRGINIA","CONNECTICUT","KENTUCKY","WISCONSIN","NEW JERSEY","COLORADO","FLORIDA","CONNECTICUT","TENNESSEE","HAWAII","HAWAII","NEVADA","NEW MEXICO","NEBRASKA","DELAWARE","CONNECTICUT","VIRGINIA","NORTH CAROLINA","WISCONSIN","SOUTH DAKOTA","OREGON","MISSOURI","IOWA","SOUTH CAROLINA","DELAWARE","PENNSYLVANIA","ARKANSAS","RHODE ISLAND","VERMONT","CONNECTICUT","NEBRASKA","INDIANA","NORTH DAKOTA","NEW JERSEY","IOWA","TENNESSEE","ILLINOIS","VERMONT","OHIO","NORTH DAKOTA","KANSAS","CONNECTICUT","MARYLAND","WASHINGTON","CONNECTICUT","ILLINOIS","ILLINOIS","SOUTH DAKOTA","COLORADO","MICHIGAN","COLORADO","MONTANA","NEVADA","NEVADA","KENTUCKY","SOUTH DAKOTA","OKLAHOMA","PENNSYLVANIA","NEVADA","ARIZONA","ARIZONA","ARIZONA","ARKANSAS","SOUTH DAKOTA","GEORGIA","MISSOURI","MAINE","NEW JERSEY","UTAH","KANSAS","NORTH DAKOTA","COLORADO","MARYLAND","MAINE","MAINE","OHIO","DELAWARE","OKLAHOMA","OHIO","PENNSYLVANIA","RHODE ISLAND","UTAH","UTAH","IOWA","UTAH","SOUTH CAROLINA","UTAH","OKLAHOMA","CONNECTICUT","MARYLAND","ARKANSAS","MINNESOTA","RHODE ISLAND","IOWA","WISCONSIN","NEVADA","ALABAMA","UTAH","UTAH","TENNESSEE","KENTUCKY","ARKANSAS","IOWA","DELAWARE","GEORGIA","ALABAMA","SOUTH CAROLINA","ARIZONA","ALABAMA","ALABAMA","NEW HAMPSHIRE","WISCONSIN","INDIANA","PENNSYLVANIA","ARIZONA","ALABAMA","TENNESSEE","MISSOURI","MISSISSIPPI","INDIANA","INDIANA","OREGON","IOWA","OREGON","VIRGINIA","IOWA","ALABAMA","DELAWARE","KANSAS","COLORADO","MINNESOTA","MISSISSIPPI","HAWAII","MINNESOTA","KENTUCKY","WASHINGTON","VERMONT","PENNSYLVANIA","KENTUCKY","ILLINOIS","MARYLAND","VERMONT","INDIANA","OHIO","OKLAHOMA","CONNECTICUT","OKLAHOMA","OHIO","MISSOURI","MICHIGAN","MINNESOTA","NORTH CAROLINA","ILLINOIS","CONNECTICUT","IOWA","MISSISSIPPI","WASHINGTON","TEXAS","WEST VIRGINIA","TENNESSEE","WEST VIRGINIA","WISCONSIN","CALIFORNIA","VIRGINIA","MISSISSIPPI","CONNECTICUT","COLORADO","ARIZONA","NORTH CAROLINA","ARIZONA","MARYLAND","LOUISIANA","KENTUCKY","CONNECTICUT","CALIFORNIA","WEST VIRGINIA","MINNESOTA","ARIZONA","ARIZONA","OREGON","NEW YORK","MISSOURI","NORTH CAROLINA","MISSOURI","VERMONT","VIRGINIA","NORTH DAKOTA","WISCONSIN","PENNSYLVANIA","KANSAS","ILLINOIS","MISSISSIPPI","OKLAHOMA","OREGON","TEXAS","UTAH","MARYLAND","CONNECTICUT","HAWAII","ALABAMA","NORTH CAROLINA","VIRGINIA","NEW JERSEY","MISSISSIPPI","SOUTH CAROLINA","MINNESOTA","INDIANA","NEW JERSEY","WEST VIRGINIA","VIRGINIA","OKLAHOMA","KENTUCKY","VIRGINIA","WASHINGTON","ALABAMA","SOUTH CAROLINA","GEORGIA","VERMONT","TENNESSEE","TENNESSEE","WISCONSIN","VIRGINIA","VIRGINIA","MICHIGAN","SOUTH CAROLINA","TENNESSEE","OKLAHOMA","TENNESSEE","KENTUCKY","WEST VIRGINIA","OKLAHOMA","SOUTH CAROLINA","SOUTH CAROLINA","MISSOURI","WISCONSIN","NEW JERSEY","NEW YORK","WEST VIRGINIA","NEW YORK","CONNECTICUT","LOUISIANA","TENNESSEE","WEST VIRGINIA","OHIO","OHIO","ALABAMA","NEW JERSEY","WASHINGTON","OHIO","ARKANSAS","NORTH CAROLINA","KENTUCKY","ARKANSAS","PENNSYLVANIA","MISSISSIPPI","MARYLAND","GEORGIA","PENNSYLVANIA","MARYLAND","FLORIDA","LOUISIANA","OREGON","FLORIDA","MINNESOTA","PENNSYLVANIA","ALABAMA","ARIZONA","WASHINGTON","OHIO","ARKANSAS","MISSISSIPPI","ARKANSAS","ILLINOIS","NORTH CAROLINA","LOUISIANA","TENNESSEE","GEORGIA","FLORIDA","OHIO","NORTH CAROLINA","OHIO","WEST VIRGINIA","PENNSYLVANIA","OREGON","PENNSYLVANIA","INDIANA","VIRGINIA","MICHIGAN","MICHIGAN","ARKANSAS","OHIO","ALABAMA","COLORADO","COLORADO","ILLINOIS","ARKANSAS","WISCONSIN","KANSAS","LOUISIANA","MISSISSIPPI","ILLINOIS","INDIANA","WASHINGTON","MARYLAND","GEORGIA","FLORIDA","MISSISSIPPI","MICHIGAN","NEW JERSEY","VIRGINIA","ARKANSAS","GEORGIA","INDIANA","TEXAS","ILLINOIS","NEW YORK","ILLINOIS","ILLINOIS","NEW JERSEY","KENTUCKY","OHIO","WISCONSIN","ARIZONA","MASSACHUSETTS","ALABAMA","NEW JERSEY","PENNSYLVANIA","OREGON","NEW JERSEY","OKLAHOMA","VIRGINIA","MASSACHUSETTS","CALIFORNIA","OKLAHOMA","NORTH CAROLINA","LOUISIANA","GEORGIA","NEW JERSEY","NEW JERSEY","NEW JERSEY","VIRGINIA","LOUISIANA","FLORIDA","LOUISIANA","MARYLAND","CALIFORNIA","FLORIDA","ARKANSAS","MICHIGAN","TEXAS","MICHIGAN","NORTH CAROLINA","TEXAS","CALIFORNIA","MISSOURI","GEORGIA","ALABAMA","LOUISIANA","NEW YORK","NEW YORK","MICHIGAN","MINNESOTA","NEW YORK","TENNESSEE","OKLAHOMA","TENNESSEE","CALIFORNIA","OHIO","ARKANSAS","NEW YORK","VIRGINIA","LOUISIANA","ARKANSAS","LOUISIANA","CALIFORNIA","PENNSYLVANIA","CALIFORNIA","NEW JERSEY","MASSACHUSETTS","PENNSYLVANIA","CALIFORNIA","MASSACHUSETTS","CALIFORNIA","TENNESSEE","NEW YORK","ILLINOIS","TEXAS","FLORIDA","FLORIDA","OHIO","FLORIDA","CALIFORNIA","GEORGIA","LOUISIANA","FLORIDA","LOUISIANA","NEW YORK","MASSACHUSETTS","NEW YORK","TEXAS","LOUISIANA","ALABAMA","LOUISIANA","LOUISIANA","NEW YORK","NEW YORK","MASSACHUSETTS","NEW YORK","MINNESOTA","LOUISIANA","MASSACHUSETTS","GEORGIA","NEW YORK","MASSACHUSETTS","FLORIDA","LOUISIANA","NEW YORK","CALIFORNIA","TEXAS","MINNESOTA","MICHIGAN","MASSACHUSETTS","TEXAS","NEW YORK","NEW YORK","LOUISIANA","FLORIDA","MASSACHUSETTS","FLORIDA","FLORIDA","TEXAS","CALIFORNIA","NEW YORK","CALIFORNIA","TEXAS","FLORIDA","FLORIDA","LOUISIANA","CALIFORNIA","TEXAS","FLORIDA","TEXAS","FLORIDA","TEXAS","CALIFORNIA","CALIFORNIA","PENNSYLVANIA","TEXAS","TEXAS","CALIFORNIA","MASSACHUSETTS","CALIFORNIA","CALIFORNIA","GEORGIA","FLORIDA","FLORIDA","MASSACHUSETTS","GEORGIA","TEXAS","MASSACHUSETTS","TEXAS","ILLINOIS","INDIANA","MASSACHUSETTS","MASSACHUSETTS","MASSACHUSETTS","FLORIDA","OHIO","MICHIGAN","NEW YORK","CALIFORNIA","OHIO","NORTH CAROLINA","PENNSYLVANIA","MICHIGAN","NEW YORK","NEW JERSEY","OKLAHOMA","TEXAS","MISSOURI","ILLINOIS","WISCONSIN","WISCONSIN","ALABAMA","MISSISSIPPI","OKLAHOMA","OHIO","MASSACHUSETTS","ILLINOIS","NEW JERSEY","WASHINGTON","INDIANA","MISSISSIPPI","CALIFORNIA","PENNSYLVANIA","INDIANA","ILLINOIS","MISSOURI","IOWA","ILLINOIS","NORTH CAROLINA","MICHIGAN","MISSOURI","OHIO","GEORGIA","ALABAMA","OREGON","MICHIGAN","OREGON","MASSACHUSETTS","WASHINGTON","CALIFORNIA","MICHIGAN","UTAH","COLORADO","TEXAS","TEXAS","FLORIDA","GEORGIA","WASHINGTON","INDIANA","WASHINGTON","WASHINGTON","SOUTH CAROLINA","MISSOURI","ARIZONA","MISSISSIPPI","TEXAS","ALABAMA","MISSISSIPPI","NEW JERSEY","NORTH CAROLINA","ARIZONA","MARYLAND","WASHINGTON","TENNESSEE","MASSACHUSETTS","OHIO","IOWA","OHIO","CONNECTICUT","INDIANA","NORTH CAROLINA","OKLAHOMA","WISCONSIN","MICHIGAN","UTAH","ARIZONA","MISSOURI","NEW JERSEY","NORTH CAROLINA","MARYLAND","KANSAS","COLORADO","OKLAHOMA","MARYLAND","NORTH DAKOTA","COLORADO","MAINE","IOWA","WEST VIRGINIA","ARKANSAS","MINNESOTA","WEST VIRGINIA","SOUTH CAROLINA","PENNSYLVANIA","WEST VIRGINIA","CONNECTICUT","UTAH","OREGON","PENNSYLVANIA","KENTUCKY","FLORIDA","LOUISIANA","MINNESOTA","NORTH CAROLINA","WISCONSIN","MARYLAND","VIRGINIA","SOUTH CAROLINA","OREGON","WEST VIRGINIA","UTAH","TENNESSEE","KENTUCKY","SOUTH DAKOTA","HAWAII","MAINE","INDIANA","KANSAS","UTAH","ILLINOIS","WEST VIRGINIA","WASHINGTON","VIRGINIA","MASSACHUSETTS","MAINE","NEW JERSEY","WASHINGTON","NEVADA","CONNECTICUT","OHIO","KANSAS","WEST VIRGINIA","NEW JERSEY","MISSISSIPPI","WISCONSIN","MISSOURI","IOWA","NORTH CAROLINA","WEST VIRGINIA","NORTH DAKOTA","NEBRASKA","DELAWARE","COLORADO","VERMONT","IDAHO","VIRGINIA","SOUTH DAKOTA","COLORADO","NORTH DAKOTA","NORTH CAROLINA","UTAH","NEBRASKA","NORTH CAROLINA","DELAWARE","IOWA","GEORGIA","MISSOURI","PENNSYLVANIA","HAWAII","MARYLAND","HAWAII","MASSACHUSETTS","WASHINGTON","GEORGIA","MAINE","KANSAS","SOUTH DAKOTA","OREGON","ARKANSAS","OREGON","DELAWARE","DELAWARE","WISCONSIN","NORTH DAKOTA","VIRGINIA","ARIZONA","RHODE ISLAND","ILLINOIS","UTAH","IDAHO","MAINE","NEW YORK","GEORGIA","IOWA","NORTH DAKOTA","OREGON","SOUTH DAKOTA","SOUTH DAKOTA","NORTH CAROLINA","NEW HAMPSHIRE","ARKANSAS","ILLINOIS","NEBRASKA","MAINE","UTAH","MONTANA","MICHIGAN","SOUTH DAKOTA","NEW MEXICO","NEW HAMPSHIRE","CONNECTICUT","ARIZONA","MASSACHUSETTS","COLORADO","NEBRASKA","NEVADA","IOWA","SOUTH DAKOTA","ARIZONA","ILLINOIS","VERMONT","MINNESOTA","SOUTH DAKOTA","MONTANA","NEBRASKA","SOUTH CAROLINA","NEW HAMPSHIRE","KENTUCKY","IDAHO","NEVADA","NORTH DAKOTA","PENNSYLVANIA","WASHINGTON","RHODE ISLAND","VIRGINIA","NORTH DAKOTA","UTAH","MONTANA","UTAH","NEBRASKA","MARYLAND","NEW MEXICO","MASSACHUSETTS","WISCONSIN","INDIANA","SOUTH CAROLINA","IDAHO","DELAWARE","NEW HAMPSHIRE","MISSISSIPPI","DELAWARE","NEVADA","HAWAII","MONTANA","OREGON","KANSAS","MISSISSIPPI","MARYLAND","UTAH","MONTANA","KENTUCKY","NEVADA","INDIANA","RHODE ISLAND","UTAH","KANSAS","MARYLAND","MICHIGAN","MONTANA","DELAWARE","SOUTH DAKOTA","NORTH CAROLINA","UTAH","ARIZONA","IDAHO","MAINE","NEVADA","NORTH DAKOTA","OKLAHOMA","KANSAS","KENTUCKY","WISCONSIN","HAWAII","TEXAS","OHIO","SOUTH DAKOTA","WEST VIRGINIA","IDAHO","WYOMING","MAINE","CONNECTICUT","KANSAS","IDAHO","MAINE","MONTANA","NEBRASKA","MONTANA","HAWAII","INDIANA","PENNSYLVANIA","NEW HAMPSHIRE","CONNECTICUT","MARYLAND","NEVADA","WYOMING","VERMONT","MAINE","HAWAII","GEORGIA","NEBRASKA","NEW MEXICO","MONTANA","IDAHO","IDAHO","ALASKA","NORTH CAROLINA","NEBRASKA","SOUTH CAROLINA","NORTH DAKOTA","MAINE","NEBRASKA","NEW HAMPSHIRE","GEORGIA","MISSOURI","MAINE","OREGON","NEW HAMPSHIRE","MINNESOTA","MONTANA","UTAH","ALASKA","VERMONT","ALASKA","COLORADO","OKLAHOMA","WYOMING","WEST VIRGINIA","WYOMING","ALASKA","NEW MEXICO","IDAHO","ARIZONA","KANSAS","DELAWARE","ALASKA","NEBRASKA","SOUTH CAROLINA","MAINE","HAWAII","MAINE","NEBRASKA","KENTUCKY","ALASKA","ARIZONA","IOWA","MONTANA","INDIANA","ARKANSAS","RHODE ISLAND","WYOMING","ARKANSAS","OREGON","WEST VIRGINIA","CONNECTICUT","IDAHO","ALASKA","WEST VIRGINIA","MARYLAND","RHODE ISLAND","NEVADA","MONTANA","NORTH DAKOTA","HAWAII","ALABAMA","ALASKA","HAWAII","NEW JERSEY","IOWA","VIRGINIA","RHODE ISLAND","SOUTH DAKOTA","TENNESSEE","INDIANA","TENNESSEE","ALABAMA","GEORGIA","NEW MEXICO","COLORADO","NEW MEXICO","MASSACHUSETTS","NEW HAMPSHIRE","WISCONSIN","ARIZONA","IOWA","ALASKA","VERMONT","MINNESOTA","WYOMING","KANSAS","RHODE ISLAND","NEW MEXICO","WEST VIRGINIA","WYOMING","MAINE","ALASKA","NORTH DAKOTA","SOUTH DAKOTA","VERMONT","WYOMING","INDIANA","KENTUCKY","INDIANA","SOUTH DAKOTA","OREGON","OREGON","UTAH","NEW MEXICO","KANSAS","ALABAMA","WYOMING","RHODE ISLAND","NEW MEXICO","DELAWARE","IDAHO","MICHIGAN","RHODE ISLAND","PENNSYLVANIA","NEW MEXICO","MONTANA","WASHINGTON","MONTANA","ALASKA","MISSOURI","NEW MEXICO","WYOMING","KENTUCKY","MISSOURI","RHODE ISLAND","WYOMING","ALASKA","RHODE ISLAND","KANSAS","GEORGIA","ARKANSAS","WYOMING","IDAHO","SOUTH CAROLINA","MISSISSIPPI","NEW MEXICO","IOWA","MONTANA","RHODE ISLAND","ARKANSAS","VERMONT","NEBRASKA","ALASKA","NEVADA","ALASKA","OKLAHOMA","NEBRASKA","DELAWARE","WYOMING"],["DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","REPUBLICAN","DEMOCRAT","DEMOCRAT","REPUBLICAN","DEMOCRAT"],[201769,72584,1178638,1037291,88122,120347,796250,429281,1247652,41842,235603,197106,249508,273495,1382536,210610,242820,730617,200603,3244165,336937,343602,212787,170962,1036477,116454,501614,325871,381329,460801,147947,662165,463567,1001732,1742718,422310,73491,617417,710746,53370,193559,1150517,409235,163387,636730,126054,1410966,205012,1152262,1484065,699655,44058,615717,181098,647744,1152887,605620,67113,424921,125050,366130,365654,69286,348526,286417,267928,736456,185127,307101,570323,93758,512058,672660,420911,333854,188320,1091541,296268,472422,201148,676584,267050,112704,295273,77798,212080,317323,174419,329918,190412,136244,1482440,454975,376930,525514,139333,700714,428220,122461,384826,187866,360737,905083,213299,970488,1138350,306658,316534,233293,1255925,2258577,1661686,1334500,254328,2684292,204151,105754,2271295,138377,937974,246166,2313746,92698,1441170,124331,1750848,403012,346832,302081,1455713,11110250,292276,92717,137845,266348,173710,503890,2115256,369561,240178,307131,1288576,1441911,1522925,2369612,412827,259235,703088,1071068,345790,2446891,281537,1070440,545382,539260,203974,287021,136078,2649852,236761,988571,652264,443547,173703,1088845,417655,188770,79004,164958,270341,891325,221705,193841,485131,95730,244497,167629,165484,669890,1677844,2279543,185935,677210,772474,661365,703486,120566,714717,1143711,897672,1584651,180543,334206,122640,1229216,1883274,439277,118804,130555,2661407,1185243,196864,1678006,821817,744337,1053849,1672143,566037,128847,469953,111025,489371,206814,1989653,514765,1071645,194191,580368,206040,165391,2189316,121180,566812,330201,279677,136718,584278,1242416,174852,872520,1478088,434993,2459683,954173,374583,168601,979409,822544,1047499,253881,933521,825879,782403,152190,1069439,2281127,214515,198343,231780,232450,232584,1189924,560282,1340383,1242987,279978,136822,422636,169046,870695,890016,786892,297523,488105,290699,859799,1080831,1087190,1071971,1601933,728177,2912790,735740,909146,158625,140003,397190,250779,284494,139639,693826,1091060,1257692,1630866,200267,754175,1259171,676026,346149,140355,3276363,422768,181249,119775,719261,333319,1420543,193695,2608335,828940,1061949,2031179,115775,2206545,196651,399276,857488,1985023,865244,750241,2345946,2341744,147068,671152,2268839,1338870,231667,533736,101273,638923,165415,483423,2194944,531373,418642,1025232,681416,475171,203054,2473633,1253014,232279,1436206,469105,430421,166559,1073589,1144008,220974,286616,2000626,180068,959792,2183628,2239164,225123,337908,428442,620258,439687,855373,515096,592929,997772,966207,394409,819395,199922,670557,1126794,155017,941173,596030,740600,1462330,1048462,423932,586353,200152,1914254,813479,1034896,529688,1318255,1176394,340511,1478120,1479438,2261872,1233654,795696,841300,1223796,572844,1345648,1245836,866831,632864,713577,1959532,638517,729547,255459,427005,1101255,1320225,366846,130112,1346695,712733,1108864,133592,3458229,628854,2019421,971869,137894,1557286,2350363,503966,673215,420375,2148222,927443,2804040,1109659,1631163,3471915,816015,741898,539398,1755396,2832704,241974,783051,423778,1489504,4567429,1981473,457766,629428,1804352,1161209,2758773,685341,1024703,856034,636614,890877,8753788,405483,1032603,653288,454029,571044,2728372,1445814,2270395,1074181,149022,1725005,200336,1405284,2655885,677296,2589026,441089,474276,685700,4569843,663742,680606,634892,185050,1266546,915018,813896,1613207,562949,865941,962337,1255656,1670003,314726,1217290,960165,531852,2413568,903835,804283,506152,483743,184067,981720,960709,1198584,1971820,836554,1953139,606443,1852475,949136,787761,734281,233946,545708,615539,661669,1084953,1620985,1546557,4379789,310065,2637700,682318,927871,633969,397466,2677820,2940044,504070,1911430,777732,2009959,267903,741960,635274,472940,2990274,724597,959862,1116230,2205604,672661,5668731,708453,560126,1448816,1275409,2485967,692611,1230111,1304894,2859764,466578,487793,572898,2891550,1961166,587446,1384375,1366149,1656701,2741165,2128474,2679165,336475,2793847,492120,2300087,1377230,1309162,2564569,2479183,498604,2394164,849624,738227,1323101,3419348,403164,1004987,440726,780154,557890,2364269,1183958,1051670,876167,2048759,4045624,582377,1915225,1788850,752174,380494,654168,1297763,4479328,3019512,2223397,3090729,2310939,1509688,821702,2416549,1677211,893524,1057631,654192,1652361,2926441,738475,2215422,695570,1437490,1030276,4839958,678367,1346481,1102169,1773827,2148278,2122786,1743192,1337078,733386,4163447,820299,879918,4522994,5297045,398041,2872579,3308124,1965486,1237258,5259126,6006429,1274188,1877963,815576,782989,3255487,2527142,1893742,1367705,3346894,990212,861530,947233,5119835,2827621,638017,4324228,1454742,792344,534774,809141,5861203,2938095,7854285,1933630,1167202,2584323,5509826,1188314,5011781,1479178,5230985,2707103,4526917,1636000,2546870,2678559,4504975,6745485,1081331,815971,1469531,792853,2825913,878502,3244798,3528633,1148275,872849,712586,927837,2838414,2806993,1310936,2418323,1717077,717460,1071109,1068722,4645332,1090893,3964522,651586,3376519,3882244,1953300,1546167,2251571,1194635,3877868,4180755,3649630,883702,2046951,1108854,4237756,4282074,3799639,5054917,3942215,8274473,2510705,2912253,2618885,1037299,5467009,3036829,3583544,3433428,2730350,1949276,3630574,3082943,1791841,2281815,1881147,3828381,1053802,3922519,3742284,714792,2244536,1419475,1401415,706628,2352748,1239606,2433746,1734096,848420,1616487,1995196,1904097,2173310,1859883,1529638,2041690,5121325,1825440,824287,2228131,1554940,1738707,1103099,473066,2082319,848583,2086499,930855,845029,551899,400258,385080,1894310,1803800,2146015,1261323,993037,844197,363921,4702233,1801169,860643,1587021,811159,504891,2453350,890167,1661532,1053873,1984942,1008966,690080,621314,1696714,456890,1318639,798352,4483810,1481212,515211,562850,4685047,2496071,2071698,2089104,1221747,841481,731234,840712,370554,931182,622073,554662,2736167,549506,352192,1147364,1114042,572086,787935,650193,679794,1921290,1939629,492644,2841005,541732,1014714,2142651,532442,1040232,1675783,183429,246843,1001619,1356865,1525849,707094,449951,691848,582315,726161,104429,368009,238522,508672,327812,325416,766395,303857,344459,2970733,295497,578313,241199,536479,1937540,539539,4617886,1255776,873268,1225938,1041066,826304,1038650,573339,490407,331001,124266,1087437,623283,124888,135879,319951,1006693,333149,203053,2215940,328125,717323,1716959,2382202,263420,1284173,1510201,66666,569597,3154834,390434,341016,1444653,404614,981584,1025935,619931,875635,326541,79189,363467,99062,1202484,178573,137013,1962430,170924,883748,127739,2362631,182110,343678,927365,152374,634373,890955,998387,2328677,179310,681530,147154,1429475,1290670,1419720,236320,326150,145560,475757,684872,649641,137288,171660,1237279,111052,1769443,781652,177761,2135216,251813,110192,206504,3001285,1080843,751957,99168,720342,151505,103855,1134661,108864,760647,1981413,216864,312788,327670,242763,2048639,116113,212824,331237,483109,702541,718058,629681,495961,92479,545355,261043,295602,2358049,94628,1120380,149244,118032,452979,862449,209040,665104,108510,189148,95284,3377674,933516,131601,1822522,141278,155369,137126,207343,433862,976414,385234,805039,1610184,901980,450807,147272,102313,196486,756764,108647,199244,266891,154507,616206,692634,439838,1629467,310674,144207,1202971,132738,887424,227636,221633,502752,813827,1871182,146742,101656,190700,2178391,322632,543050,409055,336500,175828,106905,402026,387659,1326646,995740,147375,5890347,1752414,150543,188794,126549,79347,435072,647895,622332,256595,243569,179652,419214,149259,231708,969011,2680434,273559,561094,759612,301575,70776,219262,357735,192364,2461854,556846,232751,177709,202645,165443,86112,1107849,397956,1385103,153684,401306,359219,147645,2078688,1111138,186378,1002106,202484,1036364,168936,361911,78294,100387,62007,621453,1020280,82868,367462,62239,167398,319667,236440,1104294,671018,111252,190889,460054,1155389,335593,113943,396842,475064,617178,164676,1034707,653669,266063,1033126,337324,259760,55973,505823,538152,435864,897572,189765,123594,238269,943428,154793,91655,244786,216794,121015,769044,122746,205286,1320352,682379,989609,198342,117458,863530,1374039,711714,693933,1844123,370942,1364607,286783,1571509,163696,1262393,1252401,800983,71555,135865,1322949,106867,554049,252525,261617,235984,105388,421923,102000,235595,227721,199239,68160,1729519,751985,989375,145039,943163,958448,865140,167826,583245,659170,77934,233050,335788,242584,554119,2170418,296571,2215819,415335,167922,1123323,279240,153778,1594511,401894,110700,679370,1718736,307486,133241,80380,157204,771406,995252,349237,49427,138637,577507,394022,211419,759061,201839,104683,338646,80352,512814,189951,418690,119251,502496,166424,109780,60481],[201131,71881,1177543,1036171,86901,119111,795009,427773,1245872,39922,233554,194925,247247,271144,1379996,207640,238827,726505,196392,3239945,332655,339169,208297,166452,1031959,111019,495781,319956,375328,454741,141848,656047,457239,995283,1736145,415482,66576,610411,703635,45857,185732,1142649,401366,155088,628133,117426,1401995,195910,1143027,1474820,690005,34194,605680,171060,637591,1142554,595265,56527,413895,113684,354762,354045,57573,336451,274017,255468,723794,172301,294165,557258,80377,498104,658589,406814,319560,173585,1076799,281382,457135,185363,660360,250602,95830,278198,60202,194308,299388,156176,311636,171870,117442,1463586,436041,357805,505887,119547,680810,408296,102411,364767,167617,340236,884398,192542,949660,1117187,285008,294560,211007,1233624,2235461,1638516,1310870,230697,2660535,180008,81227,2246614,113582,913168,221286,2288594,67543,1416012,98937,1725316,377464,321083,276239,1429767,11084234,265982,66147,110895,238754,145606,475731,2086804,340925,211418,278351,1259723,1413016,1493740,2340356,383548,229524,673343,1041306,316001,2416929,251566,1039999,514268,508113,172823,255531,104263,2617881,204432,955952,619504,410324,140446,1055472,384253,155166,45372,131244,236263,856872,186869,158939,449896,60360,209076,132107,129757,633827,1641730,2243402,148998,640177,735419,624098,665526,82540,676650,1105537,859418,1545436,141324,294846,82927,1189147,1843047,399039,78321,89454,2620233,1143796,155215,1636200,779700,701820,1011190,1629318,523141,85626,426381,67074,445017,162305,1945116,470031,1026129,148443,534313,159569,118773,2142661,74271,519874,283210,232679,89375,536879,1194901,127251,824915,1430325,386970,2411350,905793,326018,119388,929829,772387,997265,203447,882973,774879,730894,100650,1017379,2229057,162319,146146,178071,178726,178823,1135724,505946,1285339,1187866,224848,81645,366757,112958,814181,833190,729803,240218,430480,233041,801831,1022792,1027582,1012327,1541631,667091,2851623,674307,847370,96848,77662,333912,187474,221069,76179,629934,1027020,1193600,1566671,134821,687839,1192674,609478,279390,73258,3209168,355366,113518,51977,651250,264885,1351760,124707,2539128,759460,991984,1961173,45330,2135669,125684,328194,785747,1912740,792836,676817,2271676,2267369,72501,596575,2193980,1263791,155930,457320,24124,561752,88157,405667,2117078,453310,340478,946994,602737,395506,122966,2393089,1172135,151255,1354915,387410,348621,84475,990836,1060934,137845,203437,1917322,96488,875033,2098854,2154372,140270,251403,341056,532815,351996,767627,426648,504133,908761,876658,304770,729577,109894,580200,1035249,63163,849229,503917,647873,1369562,955182,330485,492843,105716,1819817,718367,939703,434024,1222018,1079657,243506,1380819,1381699,2161638,1131663,693498,737690,1119554,468483,1240577,1140554,761545,526677,607098,1852788,531642,621911,146434,317635,991835,1210409,256608,19819,1236094,602085,997877,22279,3346712,516904,1907306,858406,23830,1442989,2235463,389029,558162,305222,2033028,812238,2688527,993371,1514806,3355487,699237,624620,421014,1636726,2713968,123114,663796,303042,1368537,4446295,1859426,334605,504785,1679052,1034687,2631336,557849,896232,727402,507431,761647,8624432,275160,902268,521345,321815,438738,2596006,1313018,2137167,940510,14918,1590687,65761,1270279,2520755,541986,2453674,304472,336955,548201,4429270,520403,537078,490580,40608,1120903,769144,666082,1461820,411398,714191,809624,1100711,1514784,159189,1060484,802530,374086,2253974,742844,643150,345010,321891,21684,819100,796513,1032948,1806025,670400,1786980,439476,1685255,781692,618876,564433,63933,372221,441256,486479,909599,1445015,1368981,4202200,131963,2458365,501887,747115,452877,213339,2491498,2752111,314970,1721392,585719,1817528,75385,549410,442309,277147,2793538,527330,762539,918085,2006856,473316,5469163,506648,357701,1244692,1069015,2279227,485660,1021798,1095493,2650122,252756,273234,357840,2675273,1743131,364582,1160821,1140869,1430885,2514613,1901517,2451500,108769,2565077,262514,2069885,1146656,1076895,2327985,2242435,260998,2154523,608809,496045,1080153,3176203,159149,760740,195505,530050,307555,2112868,932002,799565,624021,1796549,3792167,326826,1659101,1532240,486084,111347,381174,1023124,4203917,2743702,1947575,2810536,2022568,1217932,528862,2123098,1383536,597526,757927,354224,1351762,2625157,435920,1911827,391209,1131999,723119,4530012,361538,1026391,780434,1448869,1821620,1794301,1411840,1003211,398680,3826523,478182,535915,4176462,4942287,42280,2516640,2949900,1604946,876362,4896673,5640667,903027,1498437,432232,398475,2870952,2140917,1503114,974996,2946645,589118,458053,536480,4706276,2412385,215196,3897953,1023187,359669,90842,359190,5406623,2478239,7392703,1470836,699001,2111851,5030821,697637,4515372,977677,4728613,2203506,4022321,1125786,2036620,2159354,3985050,6223698,556817,284913,937257,259897,2292372,343498,2696821,2979398,594307,308182,135994,339164,2249694,2209291,703945,1800093,1097777,88568,435239,430143,4006436,451121,3319299,6,2722637,3220418,1277165,869789,1566916,509360,3160535,3457124,2918770,116244,1275719,318461,3392403,3434833,2932411,4173715,3051701,7377725,1608636,1976189,1615569,2,4423734,1834135,2212326,1981823,1190779,2695028,4365155,3664614,2347441,2806044,2405026,4291644,1473289,4327237,4144324,1115343,2639568,1813164,1787467,1090682,2735940,1618131,2799051,2096717,1205869,1967942,2344518,2245778,2510726,2192174,1861442,2371652,5446965,2134198,1130979,2531111,1855241,2038923,1398900,764249,2368543,1129689,2367383,1210827,1120819,821773,669582,645537,2154080,2059984,2397436,1508320,1236665,1087722,606715,4944646,2037508,1096834,1812673,1036268,729496,2677685,1108311,1877335,1269486,2198039,1214792,895601,824796,1898241,656737,1518208,996950,4682033,1678735,710635,757666,4877605,2685973,2256681,2272460,1404890,1022451,911913,1020553,549652,1110060,800917,731805,2911007,722200,523161,1316100,1282474,740047,954873,816133,844210,2080594,2098271,649959,2996017,695255,1166368,2293971,683293,1190287,1824103,331479,394275,1148292,1503145,1669864,849779,591712,832763,722998,865969,242968,505586,375073,642763,458435,456033,894908,432075,470567,3096576,420784,699155,361628,655092,2055590,656661,4733630,1369788,987147,1339515,1153862,936963,1148570,682563,599135,439191,232426,1195542,730739,230070,239733,422606,1109066,435071,304797,2317444,429209,817948,1817422,2482596,363520,1384170,1608751,165107,667668,3252887,488381,436616,1538658,495687,1071978,1116201,709435,964493,415396,166437,450067,185577,1288618,264414,222435,2047635,256041,968651,212583,2447326,266562,427398,1010630,235437,717322,973540,1080807,2410267,260786,762163,227261,1509521,1369540,1498337,314815,404549,223759,553101,760415,724496,211797,245978,1311447,185130,1843010,854715,250724,2207818,324309,182061,278258,3072707,1151993,822653,169273,790365,221188,173357,1203983,177411,828266,2048658,283278,379184,393761,308470,2114293,181401,277833,396024,547084,766111,780032,691479,557557,153996,606647,321984,355747,2417747,154274,1179862,207837,176236,510513,919529,265906,721747,164857,245477,151173,3432595,988386,185980,1876761,194577,208223,189971,260123,486513,1028150,436932,856572,1661399,953167,501943,198284,153037,246896,806832,158338,248782,316265,203711,664564,740981,487988,1677238,356287,189570,1248140,176927,930919,271127,264327,545240,856306,1913175,187443,142070,231083,2218357,362363,582317,447544,374951,213792,144833,439652,424984,1363964,1033033,184166,5926712,1788410,186393,224449,161899,113882,468978,681730,655822,289990,276335,211975,451328,180459,261884,999082,2710070,303190,590689,789029,330884,99989,248203,386627,221196,2490396,585234,260961,205919,230766,193524,114089,1135731,425726,1412684,181018,427819,385630,173598,2104098,1136020,211210,1026851,227062,1060800,193347,386309,102378,124458,86052,645469,1044175,106758,390986,85721,190862,343124,259776,1127591,694240,133842,213216,482121,1177365,357447,135782,418380,496276,638166,185296,1055305,673969,286076,1052901,356900,279315,75466,525197,557525,455172,916815,208992,142560,257101,962088,172901,109372,262340,233980,137531,785513,138834,221373,1336325,698241,1005272,213726,132810,878640,1388963,726462,708425,1858090,384900,1378248,299841,1584479,176300,1274987,1264785,813153,83722,148025,1334679,118350,565308,263642,272607,246903,116004,431903,111849,245229,237163,208600,77418,1738745,761209,998334,153789,951688,966786,873347,175988,591146,667052,85724,240608,343269,249933,561405,2177618,303670,2222863,422189,174516,1129609,285358,159856,1600524,407786,116361,684744,1723982,312636,138234,85114,161926,775898,999182,353165,53338,142345,581159,397410,214718,762271,204939,107657,341335,83021,515115,192126,420711,120595,503614,167415,110636,60638],[638,703,1095,1120,1221,1236,1241,1508,1780,1920,2049,2181,2261,2351,2540,2970,3993,4112,4211,4220,4282,4433,4490,4510,4518,5435,5833,5915,6001,6060,6099,6118,6328,6449,6573,6828,6915,7006,7111,7513,7827,7868,7869,8299,8597,8628,8971,9102,9235,9245,9650,9864,10037,10038,10153,10333,10355,10586,11026,11366,11368,11609,11713,12075,12400,12460,12662,12826,12936,13065,13381,13954,14071,14097,14294,14735,14742,14886,15287,15785,16224,16448,16874,17075,17596,17772,17935,18243,18282,18542,18802,18854,18934,19125,19627,19786,19904,19924,20050,20059,20249,20501,20685,20757,20828,21163,21650,21974,22286,22301,23116,23170,23630,23631,23757,24143,24527,24681,24795,24806,24880,25152,25155,25158,25394,25532,25548,25749,25842,25946,26016,26294,26570,26950,27594,28104,28159,28452,28636,28760,28780,28853,28895,29185,29256,29279,29711,29745,29762,29789,29962,29971,30441,31114,31147,31151,31490,31815,31971,32329,32619,32760,33223,33257,33373,33402,33604,33632,33714,34078,34453,34836,34902,35235,35370,35421,35522,35727,36063,36114,36141,36937,37033,37055,37267,37960,38026,38067,38174,38254,39215,39219,39360,39713,40069,40227,40238,40483,41101,41174,41447,41649,41806,42117,42517,42659,42825,42896,43221,43572,43951,44354,44509,44537,44734,45516,45748,46055,46471,46618,46655,46909,46938,46991,46998,47343,47399,47515,47601,47605,47763,48023,48333,48380,48565,49213,49580,50157,50234,50434,50548,51000,51509,51540,52060,52070,52196,52197,53709,53724,53761,54200,54336,55044,55121,55130,55177,55879,56088,56514,56826,57089,57305,57625,57658,57968,58039,59608,59644,60302,61086,61167,61433,61776,61777,62341,63278,63305,63425,63460,63892,64040,64092,64195,65446,66336,66497,66548,66759,67097,67195,67402,67731,67798,68011,68434,68783,68988,69207,69480,69965,70006,70445,70876,70967,71082,71741,72283,72408,73424,74270,74375,74567,74577,74859,75079,75737,76416,77149,77171,77258,77756,77866,78063,78164,78238,78679,79665,80088,80544,80879,81024,81291,81695,81800,82084,82753,83074,83129,83179,83304,83580,84759,84774,84792,84853,86505,87386,87443,87691,87746,88448,88796,89011,89549,89639,89818,90028,90357,91545,91854,91944,92113,92727,92768,93280,93447,93510,94436,94437,95112,95193,95664,96237,96737,97005,97301,97739,100234,101991,102198,103610,104242,104361,105071,105282,105286,106187,106479,106744,106875,107636,109025,109370,109420,109816,110238,110293,110601,110648,110987,111313,111517,111950,112115,113463,114064,114297,114900,114937,115053,115153,115194,115205,115513,116288,116357,116428,116778,117278,118384,118670,118736,118860,119255,120736,120967,121134,122047,123161,124643,125300,126522,127437,127492,128471,128632,129183,129230,129356,130323,130335,131943,132214,132306,132366,132796,133228,133671,134104,134318,134575,135005,135130,135310,135352,136617,137321,137499,140573,143339,143528,144312,144442,145643,145874,147814,151387,151551,151750,152713,154945,155219,155537,156806,157635,157766,159594,160991,161133,161142,161852,162383,162620,164196,165636,165795,166154,166159,166967,167220,167444,168885,169848,170013,173487,174283,175190,175354,175970,177576,177589,178102,179335,180431,180756,181092,184127,186322,187933,189100,190038,192013,192431,192518,192550,192965,195793,196736,197267,197323,198145,198748,199345,199568,201805,202425,204124,206394,206740,206951,208313,209401,209642,213822,214559,215058,216277,218035,222864,223554,225280,225816,226552,226957,227665,227706,228770,229606,230202,230574,232267,236584,236748,237606,239641,240815,242182,242948,243145,244015,244247,245221,250104,250335,251401,251956,252105,252146,252210,253457,255551,256124,256610,266090,269147,272994,274639,275411,275810,275822,280193,288371,291756,292840,293451,293675,295998,299704,299968,300599,301284,302555,303595,304361,305491,307157,309946,316829,320090,321735,324958,326658,328485,331352,333867,334706,336924,342117,344003,346532,354758,355761,355939,358224,360540,360896,362453,365762,371161,379526,383344,384514,384535,386225,390628,392709,400249,401094,403477,410753,413559,415236,422821,426275,431555,432675,443932,449951,454580,459856,461582,462794,468201,472472,479005,490677,496409,501501,502372,503597,504596,510214,510250,519205,519925,521787,524514,531058,532274,532956,533541,535004,547977,549235,553968,564667,576592,588673,588720,597702,606991,618230,619300,628892,635870,638579,638896,639772,645223,651580,653882,661826,676135,676378,684655,685275,717333,723631,730860,767458,771232,790393,845353,847241,867228,881202,890514,896748,902069,936064,1003316,1037297,1043275,1202694,1371218,1451605,1539571,-745752,-734581,-581671,-555600,-524229,-523879,-463263,-419487,-404718,-402040,-400551,-395032,-393689,-386052,-384054,-383192,-378525,-365305,-362621,-357449,-351455,-349322,-341681,-337416,-332291,-331804,-329962,-325640,-308758,-306692,-302980,-300301,-300216,-295801,-291183,-286224,-281106,-280884,-279972,-275790,-269874,-269324,-260457,-259770,-256184,-251421,-246997,-243628,-243525,-242794,-242413,-236339,-236191,-225652,-225109,-224605,-224335,-218144,-215803,-215613,-213097,-205826,-205521,-203482,-201527,-199847,-199569,-198598,-198223,-197523,-195424,-194816,-192558,-189902,-184983,-183356,-183143,-180970,-180679,-179841,-179098,-178878,-178844,-177143,-174840,-172694,-170969,-168736,-168432,-167961,-166938,-165940,-164416,-159304,-158642,-157315,-155012,-153523,-151654,-151320,-150851,-150055,-148320,-148050,-147432,-146673,-146280,-144015,-142685,-141761,-140915,-140683,-139808,-138539,-137577,-136551,-134091,-130623,-130617,-128513,-128218,-126108,-125843,-125287,-120842,-120429,-118613,-118050,-117122,-115744,-114012,-113879,-113577,-112796,-110659,-109920,-109224,-108728,-108190,-108160,-108105,-107456,-105182,-103854,-102655,-102373,-101922,-101744,-101504,-101084,-100625,-100463,-100394,-100100,-99997,-98550,-98441,-98071,-98053,-97947,-95600,-94005,-91073,-90394,-90266,-89504,-88858,-88855,-87248,-86600,-86515,-86134,-85841,-85422,-85205,-85117,-84903,-84844,-84695,-84452,-83720,-83265,-83063,-82949,-82585,-82420,-81590,-81476,-80633,-80107,-80046,-78870,-78617,-78495,-78399,-78199,-77344,-75543,-74855,-74509,-74318,-74168,-74078,-73567,-73063,-72963,-72602,-72496,-71869,-71754,-71422,-71150,-70696,-70105,-70023,-69683,-69502,-69322,-68547,-67619,-67245,-66414,-66396,-66091,-65707,-65654,-65288,-65009,-64787,-63975,-63570,-61974,-61798,-61596,-61517,-61292,-60941,-60145,-59698,-59646,-59482,-58593,-58204,-57534,-57080,-56866,-56643,-56347,-56329,-55889,-54921,-54870,-54379,-54239,-53299,-52854,-52845,-52780,-52651,-51736,-51698,-51533,-51215,-51187,-51136,-51012,-50724,-50410,-50068,-49691,-49538,-49374,-49204,-48358,-48347,-48150,-47771,-45613,-45363,-45169,-44189,-43495,-43491,-42694,-42488,-42479,-41993,-40701,-40414,-40383,-39966,-39731,-39267,-38489,-38451,-37964,-37928,-37626,-37325,-37318,-37293,-36791,-36365,-35996,-35850,-35655,-35350,-34535,-33906,-33835,-33490,-33395,-32766,-32323,-32114,-31200,-30176,-30071,-29636,-29631,-29595,-29417,-29309,-29213,-28941,-28892,-28832,-28542,-28388,-28210,-28210,-28121,-28081,-27977,-27882,-27770,-27581,-27334,-26513,-26411,-25953,-25410,-24882,-24832,-24745,-24578,-24436,-24411,-24398,-24084,-24071,-24045,-24016,-23895,-23890,-23524,-23482,-23464,-23457,-23336,-23297,-23222,-22590,-22327,-22067,-21976,-21854,-21839,-21538,-21212,-20988,-20620,-20598,-20300,-20013,-19775,-19576,-19555,-19493,-19374,-19373,-19308,-19243,-19227,-18966,-18832,-18660,-18108,-17717,-17554,-17186,-16516,-16469,-16088,-16087,-15973,-15862,-15663,-15384,-15352,-15110,-14924,-14748,-14492,-13967,-13958,-13641,-13058,-12970,-12604,-12594,-12384,-12170,-12167,-12160,-11730,-11483,-11259,-11117,-10990,-10919,-10616,-9980,-9849,-9634,-9442,-9361,-9258,-9226,-9224,-8959,-8750,-8525,-8338,-8207,-8162,-7901,-7882,-7790,-7558,-7481,-7349,-7286,-7200,-7099,-7044,-6854,-6594,-6286,-6118,-6078,-6013,-5892,-5661,-5374,-5246,-5150,-4993,-4734,-4722,-4492,-3930,-3928,-3911,-3708,-3652,-3388,-3299,-3210,-3100,-2974,-2689,-2669,-2301,-2175,-2021,-1344,-1118,-991,-856,-157],["Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Ahead","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind","Presidential Behind"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Year<\/th>\n      <th>State<\/th>\n      <th>Party<\/th>\n      <th>Presidential Votes<\/th>\n      <th>Congressional Votes<\/th>\n      <th>Vote Difference<\/th>\n      <th>Result<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"autoWidth":true,"columnDefs":[{"className":"dt-right","targets":[1,4,5,6]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"year","targets":1},{"name":"state","targets":2},{"name":"party_simplified","targets":3},{"name":"presidential_total_votes","targets":4},{"name":"congressional_total_votes","targets":5},{"name":"vote_difference","targets":6},{"name":"run_ahead","targets":7}],"order":[],"orderClasses":false,"rowCallback":"function(row, data, displayNum, displayIndex, dataIndex) {\nvar value=data[7]; $(this.api().cell(row, 7).node()).css({'background-color':value == \"Presidential Ahead\" ? \"lightgreen\" : value == \"Presidential Behind\" ? \"lightcoral\" : null});\n}"}},"evals":["options.rowCallback"],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="importing-and-plotting-shape-file-data" class="level2">
<h2 class="anchored" data-anchor-id="importing-and-plotting-shape-file-data">Importing and Plotting Shape File Data</h2>
</section>
<section id="task-4-automate-zip-file-extraction" class="level2">
<h2 class="anchored" data-anchor-id="task-4-automate-zip-file-extraction">Task 4: Automate Zip File Extraction</h2>
<p>Reading Data I</p>
<p>In this code, I created a function to read the UCLA shapefiles that were previously downloaded. The function first searches the specified directory for .zip files and extracts them into a temporary directory. It then looks for the .shp files inside the unzipped contents. For each shapefile, the code uses the sf package to read it into R as a simple features object (a standardized format for spatial data). The shapefiles are stored in a list, with each entry named after the corresponding shapefile. Finally, the function returns this list of shapefiles, which can be used for further analysis.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to read UCLA shapefiles into R</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>read_ucla_shapefiles <span class="ot">&lt;-</span> <span class="cf">function</span>(directory) {</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  shapefiles <span class="ot">&lt;-</span> <span class="fu">list.files</span>(directory, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.zip$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (zip_file <span class="cf">in</span> shapefiles) {</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    unzip_dir <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unzip</span>(zip_file, <span class="at">exdir =</span> unzip_dir)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    shp_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(unzip_dir, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.shp$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (shp_file <span class="cf">in</span> shp_files) {</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>      sf_object <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(shp_file, <span class="at">quiet=</span><span class="cn">TRUE</span>)</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>      results[[<span class="fu">basename</span>(shp_file)]] <span class="ot">&lt;-</span> sf_object</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(results)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the downloaded UCLA shapefiles into R</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>ucla_shapefiles <span class="ot">&lt;-</span> <span class="fu">read_ucla_shapefiles</span>(ucla_dir)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Reading data II</p>
<p>In this code, I created a function to read specific Census shapefiles into R. The function first searches the specified directory for .zip files and extracts them into a temporary directory. It then looks for .shp files within the unzipped contents. For each shapefile, the code checks if its filename matches a list of desired filenames (provided in the desired_filenames vector). If there’s a match, the shapefile is read into R using the sf package and stored as a simple features object. The shapefiles are saved in a list, with each entry named after the corresponding shapefile. Finally, the function returns this list of selected shapefiles, which can be used for further spatial analysis.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to read specific Census shapefiles into R</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>read_census_shapefiles <span class="ot">&lt;-</span> <span class="cf">function</span>(directory, filenames) {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  shapefiles <span class="ot">&lt;-</span> <span class="fu">list.files</span>(directory, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.zip$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  results <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (zip_file <span class="cf">in</span> shapefiles) {</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    unzip_dir <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unzip</span>(zip_file, <span class="at">exdir =</span> unzip_dir)</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    shp_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(unzip_dir, <span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.shp$"</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>)</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (shp_file <span class="cf">in</span> shp_files) {</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="fu">basename</span>(shp_file) <span class="sc">%in%</span> filenames) {</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Attempt to read the shapefile without error handling</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>        sf_object <span class="ot">&lt;-</span> sf<span class="sc">::</span><span class="fu">st_read</span>(shp_file, <span class="at">quiet=</span><span class="cn">TRUE</span>)</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>        results[[<span class="fu">basename</span>(shp_file)]] <span class="ot">&lt;-</span> sf_object</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(results)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a><span class="co"># List of specific filenames to read</span></span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>desired_filenames <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2014_us_cd114.shp"</span>,</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2015_us_cd114.shp"</span>,</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2016_us_cd115.shp"</span>,</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2017_us_cd115.shp"</span>,</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2018_us_cd116.shp"</span>,</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2019_us_cd116.shp"</span>,</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2020_us_cd116.shp"</span>,</span>
<span id="cb10-33"><a href="#cb10-33" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2021_us_cd116.shp"</span>,</span>
<span id="cb10-34"><a href="#cb10-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tl_2022_us_cd116.shp"</span></span>
<span id="cb10-35"><a href="#cb10-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb10-36"><a href="#cb10-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-37"><a href="#cb10-37" aria-hidden="true" tabindex="-1"></a><span class="co"># Read the downloaded Census shapefiles into R</span></span>
<span id="cb10-38"><a href="#cb10-38" aria-hidden="true" tabindex="-1"></a>census_shapefiles <span class="ot">&lt;-</span> <span class="fu">read_census_shapefiles</span>(census_dir, desired_filenames)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="task-5-chloropleth-visualization-of-the-2000-presidential-election-electoral-college-results" class="level2">
<h2 class="anchored" data-anchor-id="task-5-chloropleth-visualization-of-the-2000-presidential-election-electoral-college-results">Task 5: Chloropleth Visualization of the 2000 Presidential Election Electoral College Results</h2>
<p>In this code, I created a choropleth map to visualize the results of the 2000 U.S. Presidential Election, highlighting the winning party in each state and displaying the number of Electoral College votes (EC) each state contributed. We will use the blue color for the Democratic candidate, Al Gore, and red color to represent the Republican candidate, George W. Bush.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>CD_106 <span class="ot">&lt;-</span> ucla_shapefiles[[<span class="st">"districts106.shp"</span>]]</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create electoral college votes column</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>CD_106_EC <span class="ot">&lt;-</span> CD_106 <span class="sc">|&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">STATENAME =</span> <span class="fu">toupper</span>(STATENAME)) <span class="sc">|&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>geometry) <span class="sc">|&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(STATENAME) <span class="sc">|&gt;</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>( <span class="at">EC =</span> <span class="fu">n</span>() <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data for year 2000 and determine the winning party per state</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>president_2000 <span class="ot">&lt;-</span> president_1976_2020 <span class="sc">%&gt;%</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">winning_party =</span> party_simplified[<span class="fu">which.max</span>(candidatevotes)]  </span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(candidatevotes, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()  </span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the join between CD_106_EC and president_2000 by state</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>president_2000_EC <span class="ot">&lt;-</span> CD_106_EC <span class="sc">%&gt;%</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(president_2000, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"STATENAME"</span> <span class="ot">=</span> <span class="st">"state"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="at">state =</span> STATENAME, EC, winning_party, state_fips)</span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="co">#import shapefiles for states</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>us_state_shapefiles <span class="ot">&lt;-</span> usmap<span class="sc">::</span><span class="fu">us_map</span>(<span class="at">regions =</span> <span class="st">"states"</span>)</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>us_state_shapefiles <span class="ot">&lt;-</span> us_state_shapefiles <span class="sc">%&gt;%</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fips =</span> <span class="fu">as.integer</span>(fips))</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Now perform the join</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> president_2000_EC <span class="sc">|&gt;</span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(us_state_shapefiles, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_fips"</span> <span class="ot">=</span> <span class="st">"fips"</span>))</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure merged_data is a valid sf object</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>merged_data_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(merged_data)</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the map with colors based on the winning party and add EC vote labels</span></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> merged_data_sf) <span class="sc">+</span></span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> winning_party), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.2</span>) <span class="sc">+</span>  </span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"blue"</span>), </span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"Bush (Republican)"</span>, <span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"Gore (Democratic)"</span>), </span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>                    <span class="at">name =</span> <span class="st">"Winning Party"</span>) <span class="sc">+</span>  <span class="co"># Red for Republican, Blue for Democrat</span></span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> EC), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span>  </span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2000 Presidential Election: Winning Party by State"</span>) <span class="sc">+</span> </span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>, </span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">16</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="task-6-advanced-chloropleth-visualization-of-electoral-college-results" class="level2">
<h2 class="anchored" data-anchor-id="task-6-advanced-chloropleth-visualization-of-electoral-college-results">Task 6: Advanced Chloropleth Visualization of Electoral College Results</h2>
<p>We can expand our findings beyond the 2000 presidential election to show election results over time from 1976-2020.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to plot election map for a given year</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>plot_election_map <span class="ot">&lt;-</span> <span class="cf">function</span>(election_year, shapefile_key) {</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Load appropriate shapefile for districts</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  CD <span class="ot">&lt;-</span> ucla_shapefiles[[shapefile_key]]</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create electoral college votes column</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  CD_EC <span class="ot">&lt;-</span> CD <span class="sc">%&gt;%</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">STATENAME =</span> <span class="fu">toupper</span>(STATENAME)) <span class="sc">%&gt;%</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span>geometry) <span class="sc">%&gt;%</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(STATENAME) <span class="sc">%&gt;%</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">EC =</span> <span class="fu">n</span>() <span class="sc">+</span> <span class="dv">2</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Filter election data for the specified year and determine the winning party per state</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  election_data <span class="ot">&lt;-</span> president_1976_2020 <span class="sc">%&gt;%</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> election_year) <span class="sc">%&gt;%</span></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">winning_party =</span> party_simplified[<span class="fu">which.max</span>(candidatevotes)]) <span class="sc">%&gt;%</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">slice_max</span>(candidatevotes, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>()</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Perform the join between Electoral College data and election data by state</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>  election_EC <span class="ot">&lt;-</span> CD_EC <span class="sc">%&gt;%</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(election_data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"STATENAME"</span> <span class="ot">=</span> <span class="st">"state"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="at">state =</span> STATENAME, EC, winning_party, state_fips)</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Import shapefiles for states</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  us_state_shapefiles <span class="ot">&lt;-</span> usmap<span class="sc">::</span><span class="fu">us_map</span>(<span class="at">regions =</span> <span class="st">"states"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">fips =</span> <span class="fu">as.integer</span>(fips))</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now perform the join between election data and state shapefiles</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>  merged_data <span class="ot">&lt;-</span> election_EC <span class="sc">%&gt;%</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">left_join</span>(us_state_shapefiles, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_fips"</span> <span class="ot">=</span> <span class="st">"fips"</span>))</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ensure merged data is a valid sf object</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>  merged_data_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(merged_data)</span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Plot the map with colors based on the winning party and add EC vote labels</span></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> merged_data_sf) <span class="sc">+</span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> winning_party), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.2</span>) <span class="sc">+</span>  </span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"blue"</span>), </span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a>                      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"Republican"</span>, <span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"Democratic"</span>), </span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>                      <span class="at">name =</span> <span class="st">"Winning Party"</span>) <span class="sc">+</span>  <span class="co"># Red for Republican, Blue for Democrat</span></span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_sf_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> EC), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span> </span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(election_year, <span class="st">"Presidential Election: Winning Party by State"</span>)) <span class="sc">+</span>  <span class="co"># Title with dynamic year</span></span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>, </span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>          <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">16</span>))</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Explicitly print the plot</span></span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the years of interest and the corresponding shapefile keys</span></span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1976</span>, <span class="dv">1980</span>, <span class="dv">1984</span>, <span class="dv">1988</span>, <span class="dv">1992</span>, <span class="dv">1996</span>, <span class="dv">2000</span>, <span class="dv">2004</span>, <span class="dv">2008</span>, <span class="dv">2012</span>)</span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>shapefile_keys <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"districts094.shp"</span>, <span class="st">"districts096.shp"</span>, <span class="st">"districts098.shp"</span>, <span class="st">"districts100.shp"</span>, <span class="st">"districts102.shp"</span>, </span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>                    <span class="st">"districts104.shp"</span>, <span class="st">"districts106.shp"</span>, <span class="st">"districts108.shp"</span>, <span class="st">"districts110.shp"</span>, <span class="st">"districts112.shp"</span>)</span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each year and plot the map</span></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(years)) {</span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_election_map</span>(years[i], shapefile_keys[i])</span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-12-10.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Election map for 2016:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the 2016 Election Data</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>election_2016_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="fu">c</span>(<span class="st">"ALABAMA"</span>, <span class="st">"ALASKA"</span>, <span class="st">"ARIZONA"</span>, <span class="st">"ARKANSAS"</span>, <span class="st">"CALIFORNIA"</span>, <span class="st">"COLORADO"</span>, </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">"CONNECTICUT"</span>, <span class="st">"DELAWARE"</span>, <span class="st">"DISTRICT OF COLUMBIA"</span>, <span class="st">"FLORIDA"</span>, <span class="st">"GEORGIA"</span>, </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">"HAWAII"</span>, <span class="st">"IDAHO"</span>, <span class="st">"ILLINOIS"</span>, <span class="st">"INDIANA"</span>, <span class="st">"IOWA"</span>, <span class="st">"KANSAS"</span>, <span class="st">"KENTUCKY"</span>, </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">"LOUISIANA"</span>, <span class="st">"MAINE"</span>, <span class="st">"MARYLAND"</span>, <span class="st">"MASSACHUSETTS"</span>, <span class="st">"MICHIGAN"</span>, <span class="st">"MINNESOTA"</span>, </span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">"MISSISSIPPI"</span>, <span class="st">"MISSOURI"</span>, <span class="st">"MONTANA"</span>, <span class="st">"NEBRASKA"</span>, <span class="st">"NEVADA"</span>, <span class="st">"NEW HAMPSHIRE"</span>, </span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"NEW JERSEY"</span>, <span class="st">"NEW MEXICO"</span>, <span class="st">"NEW YORK"</span>, <span class="st">"NORTH CAROLINA"</span>, <span class="st">"NORTH DAKOTA"</span>, </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"OHIO"</span>, <span class="st">"OKLAHOMA"</span>, <span class="st">"OREGON"</span>, <span class="st">"PENNSYLVANIA"</span>, <span class="st">"RHODE ISLAND"</span>, </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SOUTH CAROLINA"</span>, <span class="st">"SOUTH DAKOTA"</span>, <span class="st">"TENNESSEE"</span>, <span class="st">"TEXAS"</span>, <span class="st">"UTAH"</span>, <span class="st">"VERMONT"</span>, </span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>            <span class="st">"VIRGINIA"</span>, <span class="st">"WASHINGTON"</span>, <span class="st">"WEST VIRGINIA"</span>, <span class="st">"WISCONSIN"</span>, <span class="st">"WYOMING"</span>),</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">EC =</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">11</span>, <span class="dv">6</span>, <span class="dv">55</span>, <span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">29</span>, <span class="dv">16</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">20</span>, <span class="dv">11</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">10</span>, <span class="dv">11</span>, </span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>, <span class="dv">10</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">14</span>, <span class="dv">5</span>, <span class="dv">29</span>, <span class="dv">15</span>, <span class="dv">3</span>, <span class="dv">18</span>, <span class="dv">7</span>, <span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">11</span>, <span class="dv">38</span>, </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">13</span>, <span class="dv">12</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">3</span>))</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter data for year 2016 and determine the winning party per state</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>president_2016 <span class="ot">&lt;-</span> president_1976_2020 <span class="sc">%&gt;%</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2016</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">winning_party =</span> party_simplified[<span class="fu">which.max</span>(candidatevotes)] </span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(candidatevotes, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()  </span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform the join between CD_106_EC and president_2000 by state</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>president_2016_EC <span class="ot">&lt;-</span> election_2016_data <span class="sc">%&gt;%</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(president_2016, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state, EC, winning_party, state_fips)</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="co">#import shapefiles for states</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>us_state_shapefiles <span class="ot">&lt;-</span> usmap<span class="sc">::</span><span class="fu">us_map</span>(<span class="at">regions =</span> <span class="st">"states"</span>)</span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>us_state_shapefiles <span class="ot">&lt;-</span> us_state_shapefiles <span class="sc">%&gt;%</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fips =</span> <span class="fu">as.integer</span>(fips))</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Now perform the join</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> president_2016_EC <span class="sc">|&gt;</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(us_state_shapefiles, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_fips"</span> <span class="ot">=</span> <span class="st">"fips"</span>))</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure merged_data is a valid sf object</span></span>
<span id="cb13-41"><a href="#cb13-41" aria-hidden="true" tabindex="-1"></a>merged_data_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(merged_data)</span>
<span id="cb13-42"><a href="#cb13-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-43"><a href="#cb13-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the map with colors based on the winning party and add EC vote labels</span></span>
<span id="cb13-44"><a href="#cb13-44" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> merged_data_sf) <span class="sc">+</span></span>
<span id="cb13-45"><a href="#cb13-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> winning_party), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.2</span>) <span class="sc">+</span>  </span>
<span id="cb13-46"><a href="#cb13-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"blue"</span>), </span>
<span id="cb13-47"><a href="#cb13-47" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"Republican"</span>, <span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"Democratic"</span>), </span>
<span id="cb13-48"><a href="#cb13-48" aria-hidden="true" tabindex="-1"></a>                    <span class="at">name =</span> <span class="st">"Winning Party"</span>) <span class="sc">+</span>  <span class="co"># Red for Republican, Blue for Democrat</span></span>
<span id="cb13-49"><a href="#cb13-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> EC), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span> </span>
<span id="cb13-50"><a href="#cb13-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb13-51"><a href="#cb13-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2016 Presidential Election: Winning Party by State"</span>) <span class="sc">+</span> </span>
<span id="cb13-52"><a href="#cb13-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>, </span>
<span id="cb13-53"><a href="#cb13-53" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">16</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Election map for 2020:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>election_2020_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="fu">c</span>(<span class="st">"ALABAMA"</span>, <span class="st">"ALASKA"</span>, <span class="st">"ARIZONA"</span>, <span class="st">"ARKANSAS"</span>, <span class="st">"CALIFORNIA"</span>, <span class="st">"COLORADO"</span>, </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">"CONNECTICUT"</span>, <span class="st">"DELAWARE"</span>, <span class="st">"DISTRICT OF COLUMBIA"</span>, <span class="st">"FLORIDA"</span>, <span class="st">"GEORGIA"</span>, </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">"HAWAII"</span>, <span class="st">"IDAHO"</span>, <span class="st">"ILLINOIS"</span>, <span class="st">"INDIANA"</span>, <span class="st">"IOWA"</span>, <span class="st">"KANSAS"</span>, <span class="st">"KENTUCKY"</span>, </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>            <span class="st">"LOUISIANA"</span>, <span class="st">"MAINE"</span>, <span class="st">"MARYLAND"</span>, <span class="st">"MASSACHUSETTS"</span>, <span class="st">"MICHIGAN"</span>, <span class="st">"MINNESOTA"</span>, </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>            <span class="st">"MISSISSIPPI"</span>, <span class="st">"MISSOURI"</span>, <span class="st">"MONTANA"</span>, <span class="st">"NEBRASKA"</span>, <span class="st">"NEVADA"</span>, <span class="st">"NEW HAMPSHIRE"</span>, </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>            <span class="st">"NEW JERSEY"</span>, <span class="st">"NEW MEXICO"</span>, <span class="st">"NEW YORK"</span>, <span class="st">"NORTH CAROLINA"</span>, <span class="st">"NORTH DAKOTA"</span>, </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"OHIO"</span>, <span class="st">"OKLAHOMA"</span>, <span class="st">"OREGON"</span>, <span class="st">"PENNSYLVANIA"</span>, <span class="st">"RHODE ISLAND"</span>, </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"SOUTH CAROLINA"</span>, <span class="st">"SOUTH DAKOTA"</span>, <span class="st">"TENNESSEE"</span>, <span class="st">"TEXAS"</span>, <span class="st">"UTAH"</span>, <span class="st">"VERMONT"</span>, </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"VIRGINIA"</span>, <span class="st">"WASHINGTON"</span>, <span class="st">"WEST VIRGINIA"</span>, <span class="st">"WISCONSIN"</span>, <span class="st">"WYOMING"</span>),</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">EC =</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">11</span>, <span class="dv">6</span>, <span class="dv">55</span>, <span class="dv">9</span>, <span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">29</span>, <span class="dv">16</span>, <span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">20</span>, <span class="dv">11</span>, <span class="dv">6</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">4</span>, <span class="dv">10</span>, <span class="dv">11</span>, </span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">16</span>, <span class="dv">10</span>, <span class="dv">6</span>, <span class="dv">10</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">14</span>, <span class="dv">5</span>, <span class="dv">29</span>, <span class="dv">15</span>, <span class="dv">3</span>, <span class="dv">18</span>, <span class="dv">7</span>, <span class="dv">7</span>, <span class="dv">20</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">11</span>, <span class="dv">38</span>, </span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">13</span>, <span class="dv">12</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">3</span>))</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>president_2020 <span class="ot">&lt;-</span> president_1976_2020 <span class="sc">%&gt;%</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(state) <span class="sc">%&gt;%</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">winning_party =</span> party_simplified[<span class="fu">which.max</span>(candidatevotes)] </span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(candidatevotes, <span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()  </span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>president_2020_EC <span class="ot">&lt;-</span> election_2020_data <span class="sc">%&gt;%</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(president_2020, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state"</span> <span class="ot">=</span> <span class="st">"state"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(state, EC, winning_party, state_fips)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>us_state_shapefiles <span class="ot">&lt;-</span> usmap<span class="sc">::</span><span class="fu">us_map</span>(<span class="at">regions =</span> <span class="st">"states"</span>)</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>us_state_shapefiles <span class="ot">&lt;-</span> us_state_shapefiles <span class="sc">%&gt;%</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fips =</span> <span class="fu">as.integer</span>(fips))</span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> president_2020_EC <span class="sc">|&gt;</span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(us_state_shapefiles, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"state_fips"</span> <span class="ot">=</span> <span class="st">"fips"</span>))</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>merged_data_sf <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(merged_data)</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> merged_data_sf) <span class="sc">+</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> winning_party), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.2</span>) <span class="sc">+</span>  </span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"red"</span>, <span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"blue"</span>), </span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>                    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"REPUBLICAN"</span> <span class="ot">=</span> <span class="st">"Republican"</span>, <span class="st">"DEMOCRAT"</span> <span class="ot">=</span> <span class="st">"Democratic"</span>), </span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>                    <span class="at">name =</span> <span class="st">"Winning Party"</span>) <span class="sc">+</span> </span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_sf_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> EC), <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">3</span>, <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span>  </span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"2020 Presidential Election: Winning Party by State"</span>) <span class="sc">+</span>  </span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>, </span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">16</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="mp03_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="comparing-the-effects-of-ecv-allocation-rules" class="level2">
<h2 class="anchored" data-anchor-id="comparing-the-effects-of-ecv-allocation-rules">Comparing the Effects of ECV Allocation Rules</h2>
<p>The different Electoral College (ECV) allocation rules can have a major impact on presidential election results. Four key ECV strategies are typically considered:</p>
<ol type="1">
<li>State-Wide Winner-Take-All</li>
<li>District-Wide Winner-Take-All + State-Wide “At Large” Votes</li>
<li>State-Wide Proportional</li>
<li>National Proportional</li>
</ol>
</section>
<section id="state-wide-winner-take-all" class="level2">
<h2 class="anchored" data-anchor-id="state-wide-winner-take-all">State-Wide Winner-Take-All</h2>
<p>Under this system, the candidate who wins the majority of votes in a state receives all of that state’s electoral votes.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ECVs per state per year</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>electoral_votes <span class="ot">&lt;-</span> house_1976_2022 <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(year, state, district)) <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state) <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ecv_total =</span> total <span class="sc">+</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">"total"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize the state-wide winner take-all results</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>state_wide_winner_take_all <span class="ot">&lt;-</span> president_1976_2020 <span class="sc">%&gt;%</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, candidate) <span class="sc">%&gt;%</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_votes =</span> <span class="fu">sum</span>(candidatevotes)) <span class="sc">%&gt;%</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(total_votes <span class="sc">==</span> <span class="fu">max</span>(total_votes)) <span class="sc">%&gt;%</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Include the candidate's parties</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>candidate_party <span class="ot">&lt;-</span> president_1976_2020 <span class="sc">%&gt;%</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state, candidate, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party_simplified <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span>, <span class="st">"REPUBLICAN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">party =</span> party_simplified)</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge data</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>state_wide_winner_take_all_results <span class="ot">&lt;-</span> <span class="fu">left_join</span>(state_wide_winner_take_all, candidate_party, </span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>                                                <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"state"</span>, <span class="st">"candidate"</span>))</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="co"># Merging data frame with the ECV counts for each year</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>state_wide_winner <span class="ot">&lt;-</span> <span class="fu">left_join</span>(state_wide_winner_take_all_results, electoral_votes, </span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'year'</span>, <span class="st">'state'</span>))</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="co"># winner of each election by majority ECVs</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>election_winner_state_wide <span class="ot">&lt;-</span> state_wide_winner <span class="sc">%&gt;%</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, candidate, party) <span class="sc">%&gt;%</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(ecv_total) <span class="sc">%&gt;%</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">results =</span> <span class="fu">sum</span>(ecv_total)) <span class="sc">%&gt;%</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(results <span class="sc">==</span> <span class="fu">max</span>(results)) <span class="sc">%&gt;%</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">state_wide_winner =</span> candidate,</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">state_wide_party =</span> party,</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>         <span class="at">state_wide_results =</span> results)</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the kable table</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(election_winner_state_wide, </span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>      <span class="at">caption =</span> <span class="st">"Table 3: State-Wide Winner-Take-All Election Winners"</span>, </span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>      <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Year"</span>, <span class="st">"Winner"</span>, <span class="st">"Party"</span>, <span class="st">"Electoral College Votes"</span>),</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>      <span class="at">format =</span> <span class="st">"html"</span>, </span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>      <span class="at">align =</span> <span class="st">"c"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>), <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>Table 3: State-Wide Winner-Take-All Election Winners</caption>
<thead>
<tr class="header">
<th style="text-align: center;" data-quarto-table-cell-role="th">Year</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Winner</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Party</th>
<th style="text-align: center;" data-quarto-table-cell-role="th">Electoral College Votes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1976</td>
<td style="text-align: center;">CARTER, JIMMY</td>
<td style="text-align: center;">DEMOCRAT</td>
<td style="text-align: center;">294</td>
</tr>
<tr class="even">
<td style="text-align: center;">1980</td>
<td style="text-align: center;">REAGAN, RONALD</td>
<td style="text-align: center;">REPUBLICAN</td>
<td style="text-align: center;">489</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1984</td>
<td style="text-align: center;">REAGAN, RONALD</td>
<td style="text-align: center;">REPUBLICAN</td>
<td style="text-align: center;">525</td>
</tr>
<tr class="even">
<td style="text-align: center;">1988</td>
<td style="text-align: center;">BUSH, GEORGE H.W.</td>
<td style="text-align: center;">REPUBLICAN</td>
<td style="text-align: center;">426</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1992</td>
<td style="text-align: center;">CLINTON, BILL</td>
<td style="text-align: center;">DEMOCRAT</td>
<td style="text-align: center;">367</td>
</tr>
<tr class="even">
<td style="text-align: center;">1996</td>
<td style="text-align: center;">CLINTON, BILL</td>
<td style="text-align: center;">DEMOCRAT</td>
<td style="text-align: center;">376</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2000</td>
<td style="text-align: center;">BUSH, GEORGE W.</td>
<td style="text-align: center;">REPUBLICAN</td>
<td style="text-align: center;">271</td>
</tr>
<tr class="even">
<td style="text-align: center;">2004</td>
<td style="text-align: center;">BUSH, GEORGE W.</td>
<td style="text-align: center;">REPUBLICAN</td>
<td style="text-align: center;">286</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2008</td>
<td style="text-align: center;">OBAMA, BARACK H.</td>
<td style="text-align: center;">DEMOCRAT</td>
<td style="text-align: center;">361</td>
</tr>
<tr class="even">
<td style="text-align: center;">2012</td>
<td style="text-align: center;">OBAMA, BARACK H.</td>
<td style="text-align: center;">DEMOCRAT</td>
<td style="text-align: center;">329</td>
</tr>
<tr class="odd">
<td style="text-align: center;">2016</td>
<td style="text-align: center;">TRUMP, DONALD J.</td>
<td style="text-align: center;">REPUBLICAN</td>
<td style="text-align: center;">305</td>
</tr>
<tr class="even">
<td style="text-align: center;">2020</td>
<td style="text-align: center;">BIDEN, JOSEPH R. JR</td>
<td style="text-align: center;">DEMOCRAT</td>
<td style="text-align: center;">306</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="district-wide-winner-take-all-state-wide-at-large-votes" class="level2">
<h2 class="anchored" data-anchor-id="district-wide-winner-take-all-state-wide-at-large-votes">District-Wide Winner-Take-All + State-Wide “At Large” Votes</h2>
<p>Under this system, a state’s electoral votes based on the winner of individual districts, while the remaining votes are awarded to the statewide winner. It creates more regional representation while still maintaining a dominant role for the overall state victor.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>winner_per_district_by_year <span class="ot">&lt;-</span> house_1976_2022 <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, district) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(candidatevotes <span class="sc">==</span> <span class="fu">max</span>(candidatevotes)) <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state, district, party) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, state, party) <span class="sc">%&gt;%</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">ecv_count =</span> <span class="fu">n</span>())</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>candidate_party <span class="ot">&lt;-</span> president_1976_2020 <span class="sc">%&gt;%</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state, candidate, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(party_simplified <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"DEMOCRAT"</span>, <span class="st">"REPUBLICAN"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">party =</span> party_simplified)</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>merge_district_ecv_count <span class="ot">&lt;-</span> <span class="fu">left_join</span>(winner_per_district_by_year, candidate_party, </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"year"</span>, <span class="st">"state"</span>, <span class="st">"party"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(candidate)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the statewide popular vote winner (used to allocate the extra 2 ECVs)</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>state_wide_popular <span class="ot">&lt;-</span> state_wide_winner <span class="sc">%&gt;%</span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state, candidate, party) <span class="sc">%&gt;%</span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">state_winner =</span> candidate,</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">state_winner_party =</span> party)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>election_winner_district_wide <span class="ot">&lt;-</span> <span class="fu">left_join</span>(merge_district_ecv_count, state_wide_popular, </span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'year'</span>, <span class="st">'state'</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ecv_extra =</span> <span class="fu">case_when</span>(candidate <span class="sc">==</span> state_winner <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>                               candidate <span class="sc">!=</span> state_winner <span class="sc">~</span> <span class="dv">0</span>),</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">ecv_total =</span> ecv_count <span class="sc">+</span> ecv_extra) <span class="sc">%&gt;%</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, candidate, party) <span class="sc">%&gt;%</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">candidate_ecv_total =</span> <span class="fu">sum</span>(ecv_total)) <span class="sc">%&gt;%</span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(candidate) <span class="sc">%&gt;%</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(candidate_ecv_total <span class="sc">==</span> <span class="fu">max</span>(candidate_ecv_total)) <span class="sc">%&gt;%</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">district_wide_winner =</span> candidate,</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>         <span class="at">district_wide_party =</span> party,</span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>         <span class="at">district_wide_results =</span> candidate_ecv_total)</span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>election_winner_district_wide <span class="sc">%&gt;%</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, district_wide_winner, district_wide_party, district_wide_results) <span class="sc">%&gt;%</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Table 4: District-Wide Winner-Take-All + State-Wide 'At Large' Votes Election Winners"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>), <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>Table 4: District-Wide Winner-Take-All + State-Wide 'At Large' Votes Election Winners</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">district_wide_winner</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">district_wide_party</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">district_wide_results</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1976</td>
<td style="text-align: left;">CARTER, JIMMY</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">335</td>
</tr>
<tr class="even">
<td style="text-align: right;">1980</td>
<td style="text-align: left;">REAGAN, RONALD</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">274</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1984</td>
<td style="text-align: left;">REAGAN, RONALD</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">269</td>
</tr>
<tr class="even">
<td style="text-align: right;">1988</td>
<td style="text-align: left;">DUKAKIS, MICHAEL</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">271</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1992</td>
<td style="text-align: left;">CLINTON, BILL</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">310</td>
</tr>
<tr class="even">
<td style="text-align: right;">1996</td>
<td style="text-align: left;">CLINTON, BILL</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">262</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2000</td>
<td style="text-align: left;">BUSH, GEORGE W.</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">278</td>
</tr>
<tr class="even">
<td style="text-align: right;">2004</td>
<td style="text-align: left;">BUSH, GEORGE W.</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">290</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2008</td>
<td style="text-align: left;">OBAMA, BARACK H.</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">304</td>
</tr>
<tr class="even">
<td style="text-align: right;">2012</td>
<td style="text-align: left;">ROMNEY, MITT</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">281</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2016</td>
<td style="text-align: left;">TRUMP, DONALD J.</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">304</td>
</tr>
<tr class="even">
<td style="text-align: right;">2020</td>
<td style="text-align: left;">BIDEN, JOSEPH R. JR</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">275</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="state-wide-proportional" class="level2">
<h2 class="anchored" data-anchor-id="state-wide-proportional">State wide proportional</h2>
<p>In this system, electoral votes are distributed in proportion to the percentage of votes each candidate receives within the state.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>state_wide_proportional <span class="ot">&lt;-</span> president_1976_2020 <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">prop =</span> candidatevotes <span class="sc">/</span> totalvotes)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>ecv_state_proportion_winner <span class="ot">&lt;-</span> <span class="fu">left_join</span>(state_wide_proportional, electoral_votes, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'year'</span>, <span class="st">'state'</span>))</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>election_winner_state_prop <span class="ot">&lt;-</span> ecv_state_proportion_winner <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state, candidate, party_simplified, prop, ecv_total) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ecv_votes =</span> <span class="fu">round</span>(prop <span class="sc">*</span> ecv_total)) <span class="sc">%&gt;%</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ecv_votes <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, candidate, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">combined_ecv =</span> <span class="fu">sum</span>(ecv_votes)) <span class="sc">%&gt;%</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(combined_ecv <span class="sc">==</span> <span class="fu">max</span>(combined_ecv)) <span class="sc">%&gt;%</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">state_prop_winner =</span> candidate,</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">state_prop_party =</span> party_simplified,</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">state_prop_results =</span> combined_ecv)</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>election_winner_state_prop <span class="sc">%&gt;%</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, state_prop_winner, state_prop_party, state_prop_results) <span class="sc">%&gt;%</span></span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Table 5: State-Wide Proportional Election Winner"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>), <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>Table 5: State-Wide Proportional Election Winner</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">state_prop_winner</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">state_prop_party</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">state_prop_results</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1976</td>
<td style="text-align: left;">CARTER, JIMMY</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">264</td>
</tr>
<tr class="even">
<td style="text-align: right;">1980</td>
<td style="text-align: left;">REAGAN, RONALD</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">266</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1984</td>
<td style="text-align: left;">REAGAN, RONALD</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">315</td>
</tr>
<tr class="even">
<td style="text-align: right;">1988</td>
<td style="text-align: left;">BUSH, GEORGE H.W.</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">287</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1992</td>
<td style="text-align: left;">CLINTON, BILL</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">226</td>
</tr>
<tr class="even">
<td style="text-align: right;">1996</td>
<td style="text-align: left;">CLINTON, BILL</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">259</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2000</td>
<td style="text-align: left;">BUSH, GEORGE W.</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">258</td>
</tr>
<tr class="even">
<td style="text-align: right;">2004</td>
<td style="text-align: left;">BUSH, GEORGE W.</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">275</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2008</td>
<td style="text-align: left;">OBAMA, BARACK H.</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">278</td>
</tr>
<tr class="even">
<td style="text-align: right;">2012</td>
<td style="text-align: left;">OBAMA, BARACK H.</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">268</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2016</td>
<td style="text-align: left;">CLINTON, HILLARY</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">254</td>
</tr>
<tr class="even">
<td style="text-align: right;">2020</td>
<td style="text-align: left;">BIDEN, JOSEPH R. JR</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">272</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
<section id="national-proportion" class="level2">
<h2 class="anchored" data-anchor-id="national-proportion">National proportion</h2>
<p>In this system, electoral votes are allocated across the entire country based on the national vote share, rather than on a state-by-state basis.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>nation_wide_proportional <span class="ot">&lt;-</span> president_1976_2020 <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, candidate, party_simplified) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">candidate_total =</span> <span class="fu">sum</span>(candidatevotes)) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_year =</span> <span class="fu">sum</span>(candidate_total),</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">prop =</span> candidate_total <span class="sc">/</span> total_year) <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>total_ecv_per_year <span class="ot">&lt;-</span> electoral_votes <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">total_ecv =</span> <span class="fu">sum</span>(ecv_total))</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>merge_nation_wide_ecv <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nation_wide_proportional, total_ecv_per_year, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">'year'</span>))</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>election_winner_nation_prop <span class="ot">&lt;-</span> merge_nation_wide_ecv <span class="sc">%&gt;%</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">combined_ecv =</span> <span class="fu">round</span>(prop <span class="sc">*</span> total_ecv)) <span class="sc">%&gt;%</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(combined_ecv <span class="sc">!=</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(combined_ecv <span class="sc">==</span> <span class="fu">max</span>(combined_ecv)) <span class="sc">%&gt;%</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, candidate, party_simplified, combined_ecv) <span class="sc">%&gt;%</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">nation_prop_winner =</span> candidate,</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">nation_prop_party =</span> party_simplified,</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">nation_prop_results =</span> combined_ecv)</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>election_winner_nation_prop <span class="sc">%&gt;%</span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, nation_prop_winner, nation_prop_party, nation_prop_results) <span class="sc">%&gt;%</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">"Table 6: National Proportional Election Winner"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>), <span class="at">full_width =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-striped table-hover table-condensed caption-top table-sm small" data-quarto-postprocess="true">
<caption>Table 6: National Proportional Election Winner</caption>
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">nation_prop_winner</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">nation_prop_party</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">nation_prop_results</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1976</td>
<td style="text-align: left;">CARTER, JIMMY</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">267</td>
</tr>
<tr class="even">
<td style="text-align: right;">1980</td>
<td style="text-align: left;">REAGAN, RONALD</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">270</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1984</td>
<td style="text-align: left;">REAGAN, RONALD</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">313</td>
</tr>
<tr class="even">
<td style="text-align: right;">1988</td>
<td style="text-align: left;">BUSH, GEORGE H.W.</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">284</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1992</td>
<td style="text-align: left;">CLINTON, BILL</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">229</td>
</tr>
<tr class="even">
<td style="text-align: right;">1996</td>
<td style="text-align: left;">CLINTON, BILL</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">263</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2000</td>
<td style="text-align: left;">GORE, AL</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">258</td>
</tr>
<tr class="even">
<td style="text-align: right;">2004</td>
<td style="text-align: left;">BUSH, GEORGE W.</td>
<td style="text-align: left;">REPUBLICAN</td>
<td style="text-align: right;">271</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2008</td>
<td style="text-align: left;">OBAMA, BARACK H.</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">282</td>
</tr>
<tr class="even">
<td style="text-align: right;">2012</td>
<td style="text-align: left;">OBAMA, BARACK H.</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">272</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2016</td>
<td style="text-align: left;">CLINTON, HILLARY</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">257</td>
</tr>
<tr class="even">
<td style="text-align: right;">2020</td>
<td style="text-align: left;">BIDEN, JOSEPH R. JR</td>
<td style="text-align: left;">DEMOCRAT</td>
<td style="text-align: right;">276</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>I believe the National Proportional method is the fairest ECV system, as it allocates electoral votes based on the national popular vote, ensuring that the candidate with the most votes nationwide wins. This would eliminate the possibility of a candidate losing the election despite winning the popular vote. However, implementing this system would require agreement from all states and likely a constitutional amendment.</p>
<p>On the other hand, the State-Wide Winner-Take-All method is the least fair. It allows a candidate to win the presidency by securing enough states to reach 270 electoral votes, even if they lose the national popular vote. This results in an outcome where the Electoral College winner may not reflect the majority of voters’ preferences.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>


</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>MIT Election Data and Science Lab, 2017, “U.S. House 1976–2022”, https://doi.org/10.7910/DVN/IG0UN2, Harvard Dataverse, V13, UNF:6:Ky5FkettbvohjTSN/IVldA== [fileUNF]<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>MIT Election Data and Science Lab, 2017, “U.S. President 1976–2020”, https://doi.org/10.7910/DVN/42MVDX, Harvard Dataverse, V8, UNF:6:F0opd1IRbeYI9QyVfzglUw== [fileUNF]<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>https://cdmaps.polisci.ucla.edu/<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>https://cdmaps.polisci.ucla.edu/<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>https://www.census.gov/geographies/mapping-files/time-series/geo/tiger-line-file.html<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>Part of project code collaborated with Yanting Zhao and Haolin Mo<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/Chloe384\.github\.io\/STA9750-2024-FALL\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>